{"version":3,"sources":["img/no-webp/carousel_1.jpg","img/webp/carousel_1.webp","img/no-webp/carousel_2.jpg","img/webp/carousel_2.webp","img/no-webp/carousel_3.jpg","img/webp/carousel_3.webp","constants/breakpoint.js","constants/API_BASE_URL.js","utils.js","webAPI/userAPI.js","webAPI/cartAPI.js","redux/reducers/cartReducer.js","redux/reducers/userReducer.js","img/LOGO.png","components/Header/Header.js","components/Footer/Footer.js","components/CourseCard/CourseCard.js","redux/reducers/courseReducer.js","webAPI/courseAPI.js","pages/HomePage/HomePage.js","pages/LoginPage/LoginPage.js","pages/RegisterPage/RegisterPage.js","pages/MePage/AccountSetting/ModalUpdatePassword.js","pages/MePage/AccountSetting/AccountSetting.js","redux/reducers/orderReducer.js","webAPI/orderAPI.js","pages/MePage/OrderHistory/OrderHistory.js","routes/MeRoutes.js","pages/MePage/MePage.js","components/Loading/Loading.js","pages/ConsoleCoursesPage/CoursesTable.js","pages/ConsoleCoursesPage/ConsoleCoursesPage.js","webAPI/adminAPI.js","redux/reducers/memberReducer.js","pages/ConsoleMembersPage/MembersTable.js","pages/ConsoleMembersPage/ConsoleMembersPage.js","pages/MemberDetailPage/MemberDetailPage.js","routes/ConsoleRoutes.js","pages/ConsolePage/ConsolePage.js","pages/CartListPage/CartListPage.js","pages/CheckoutPage/CheckoutPage.js","pages/CourseListPage/CourseListPage.js","pages/MyCoursePage/MyCoursePage.js","pages/CourseInfoPage/CourseInfoPage.js","webAPI/teacherAPI.js","redux/reducers/teacherReducer.js","pages/TeacherInfoPage/TeacherInfoPage.js","pages/ClassroomPage/UnitPage.js","pages/ClassroomPage/ClassroomPage.js","pages/TeacherApplyPage/TeacherApplyPage.js","pages/TeacherPage/MyTeachCoursePage/MyTeachCourseTable.js","pages/TeacherPage/MyTeachCoursePage/MyTeachCoursePage.js","pages/TeacherPage/NewCourseForm/NewCourseForm.js","pages/TeacherPage/TeacherSettingForm/TeacherSettingForm.js","components/CourseUnitsList/CourseUnitsList.js","components/CourseSettingForm/CourseSettingForm.js","pages/TeacherPage/UpdateCourseForm/UpdateCourseForm.js","pages/TeacherPage/EditUnitForm/EditUnitForm.js","routes/TeacherRoutes.js","pages/TeacherPage/TeacherPage.js","routes/Routes.js","App.js","reportWebVitals.js","redux/reducers/unitReducer.js","redux/reducers/errorMessageReducer.js","redux/store.js","index.js","constants/theme.js"],"names":["MEDIA_QUERY_MOBILE_M","MEDIA_QUERY_TABLET","BASE_URL","TOKEN_NAME","passwordRegExp","isStrongPassword","password","test","toString","setAuthToken","token","localStorage","setItem","getAuthToken","getItem","toCurrency","num","parts","split","replace","join","translateAuth","AuthTypeId","addCartItemAPI","id","fetch","method","headers","Authorization","then","res","json","deleteCartItemAPI","cartSlice","createSlice","name","initialState","cartList","isGettingCartList","getCartListError","isAddingCartItem","addCartItemError","isDeletingCartItem","deleteCartItemError","reducers","setCartList","state","action","console","log","payload","setIsGettingCartList","setGetCartListError","setIsAddingCartItem","setAddCartItemError","setIsDeletingCartItem","setDeleteCartItemError","actions","getCartList","dispatch","ok","errorMessage","data","cart_items","catch","err","selectCartList","store","cart","userSlice","user","isGettingUser","setUser","setIsGettingUser","setUserErrorMessage","getMe","getState","a","login","email","body","JSON","stringify","loginAPI","register","nickname","registerAPI","logout","updateMyInfo","updateMyInfoAPI","updateMyPassword","oldPassword","newPassword","updateMyPasswordAPI","selectUser","useBreakpoint","Grid","Search","Input","StyledSearch","styled","StyledMenu","Menu","HeaderContainer","div","props","theme","colors","primary","text","Logo","Link","NavContainer","NavToggleGroup","NavRightPart","NavToggler","Button","NavTogglerBody","light","CartIcon","ShoppingCartOutlined","LeftMenu","searchValue","setSearchValue","onSearch","handleClose","currentKey","md","mode","onClick","selectedKeys","value","onChange","e","placeholder","Item","to","RightMenu","handleLogout","authTypeId","Header","useDispatch","history","useHistory","pathname","useLocation","useSelector","useState","setCurrentKey","useEffect","indexOf","getCurrentKey","push","visible","setState","src","LOGO","alt","count","length","offset","title","placement","closable","onClose","FooterContainer","grey","MediaCol","Col","MediaWrapper","Footer","gutter","sm","xs","FacebookFilled","TwitterSquareFilled","InstagramFilled","href","style","color","GithubOutlined","fontSize","Meta","Card","CardWrapper","main","StyledImg","img","ImgPlaceholder","Spin","TeacherLink","Price","CourseCard","course","isBought","cover","once","imgUrl","price","Teacher","TeacherId","size","avatarUrl","courseSlice","isGettingCourse","getCourseError","courseList","myCourseList","myTeachCourseList","detailCourse","unit","setCourseList","setIsGettingCourse","setGetCourseError","setCourse","setMyCourseList","setMyTeachCourseList","setDetailCourse","setUnit","getCourseList","params","keyword","page","limit","sort","order","getPublic","getCourseListAPI","getCourse","getCourseAPI","getMyCourseList","getMyTeachCourseList","addCourse","description","addCourseAPI","updateCourse","courseId","isPublic","unit_list","undefined","updateCourseAPI","getDetailCourse","getDetailCourseAPI","parse","getUnitByUnitId","unitId","getUnitByUnitIdAPI","updateUnitByUnitId","updateUnitByUnitIdAPI","selectIsGettingCourse","selectCourseList","selectCourse","selectMyCourseList","selectMyTeachCourseList","selectDetailCourse","selectUnit","PageWrapper","Intro","CoursesWrapper","TitleLatestCourse","LoadingWrapper","CourseListPage","isGettingCourseList","showThumbs","showStatus","autoPlay","infiniteLoop","require","webp","lg","filter","map","LoginBox","FormTitle","NoAccountMessage","StyledForm","Form","layout","labelCol","span","wrapperCol","tailLayout","validateMessages","required","types","Login","React","onFinish","message","loading","content","key","duration","success","error","label","rules","type","Password","htmlType","RegisterBox","HasAccountMessage","Register","getFieldValue","validator","_","inputValue","Promise","resolve","reject","extra","dependencies","BoxWrapper","UpdateForm","forwardRef","ref","setModalText","useForm","form","useImperativeHandle","resetForm","resetFields","setTimeout","ModalUpdatePassword","setVisible","ChildRef","useRef","modalText","onCancel","current","afterClose","footer","InfoRow","Row","InfoTitle","InfoDetail","AccountSetting","Date","createdAt","toLocaleString","updatedAt","defaultValue","enterButton","warning","danger","orderSlice","orderResponse","isSendingOrder","sendingOrderError","orderList","setOrderResponse","setIsSendingOrder","setSendingOrderError","setOrderList","sendOrder","sendOrderAPI","getMyOrderList","selectOrderList","EmptyOrderList","CourseImg","i","paymentType","sumPrice","isPaid","className","columns","dataIndex","expandable","expandedRowRender","row","render","selectedOrderItems","Order_items","Course","amountPaid","dataSource","pagination","MeRoutes","exact","path","Sider","Layout","FixedSider","StyledMenuItem","IconWrapper","UseIcon","UserOutlined","MePage","location","defaultSelectedKeys","defaultOpenKeys","icon","FileDoneOutlined","marginLeft","Loading","record","CoursesTable","courses","item","slice","Content","InfoHeader","ConsoleCoursesPage","margin","memberSlice","memberList","member","isGettingMemberList","isGettingMember","setMemberList","setMember","setErrorMessage","setIsGettingMemberList","setIsGettingMember","getMemberList","getMember","getMemberAPI","updateMemberAuth","authType","updateUserInfoAPI","selectMember","selectMemberList","selectIsGettingMemberList","selectIsGettingMember","MembersTable","members","auth","TableContainer","white","ConsoleMembersPage","Option","Select","Typography","Title","Text","MemberContent","CourseTitle","AuthSelection","selectedUserId","handleChange","width","MemberDetailPage","useParams","localAuthTypeId","setLocalAuthTypeId","bordered","CourseId","ConsoleRoutes","ConsolePage","BookOutlined","ContactsOutlined","padding","LeftContainer","RightContainerOuter","RightContainerInner","secondary","CartListPage","forEach","el","handleDeleteCartItem","deleteCartItem","DeleteOutlined","pageSize","align","block","Paragraph","FormWrapper","formItemLayout","buttonItemLayout","CheckoutPage","sumCourse","priceString","values","orderData","orderCourses","level","allowClear","SearchWrapper","SearchInfo","URLSearchParams","search","get","selected","setSelected","MyCourseListPage","CourseWrapper","ButtonPlacer","ButtonWrapper","CourseInfoPage","checkIsAlreadyInCart","Number","boughtCourses","addCartItem","disabled","unit_title","number","renderItem","teacherSlice","teacherList","isGettingTeacherList","getTeacherListError","teacher","isGettingTeacher","getTeacherError","setTeacherList","setIsGettingTeacherList","setGetTeacherListError","setTeacher","setIsGettingTeacher","setGetTeacherError","getTeacher","getTeacherAPI","applyTeacher","applyTeacherAPI","updateTeacherInfo","updateTeacherInfoAPI","selectTeacher","selectIsGettingTeacher","TeacherWrapper","TeacherTitle","TeacherInfoPage","Courses","UnitTitle","UnitDescription","UnitVideo","Youtube","UnitPage","url","courseTitle","videoUrl","videoId","URL","opt","alignItems","justifyContent","playerVars","autoplay","FixedLayout","ScrollSider","prop","ContentWrapper","ClassroomPage","handleClickUnit","PlayCircleOutlined","RegisterPageWrapper","FormItem","beforeUpload","file","isJpgOrPng","isLt2M","TeacherApplyPage","isUploading","setIsUploading","imageUrl","setImageUrl","upload","TextArea","rows","resize","rotate","shape","listType","showUploadList","info","status","returnUrl","response","link","setFieldsValue","borderRadius","LoadingOutlined","PlusOutlined","MyTeachCourseTable","MyTeachCoursePage","FormContainer","range","NewCoursePage","initialValues","min","max","formatter","parser","grid","aspect","modalTitle","Info","TeacherSetting","ListContainer","ListContent","List","ListFooter","UnitText","Unit","dragHandleProps","handleClickEditUnitButton","handleDeleteUnit","MenuOutlined","EditOutlined","CourseUnitsList","unitList","handleAddUnit","index","draggableId","provided","innerRef","draggableProps","cursor","CourseSettingForm","getFieldsValue","validateFields","marginTop","CourseContent","UpdateCoursePage","oldUnitList","newUnitList","getFormValue","handleClickSave","onDragEnd","result","destination","source","reorderedUnitList","list","startIndex","endIndex","Array","from","splice","removed","reorder","droppableId","droppableProps","EditUnitPage","AvatarWrapper","TeacherPage","ReadOutlined","NoLoggingMessage","UnauthorizedMessage","Routes","AntLayout","$fixedsider","consolePage","fixedSiderPage","App","checkIsConsolePage","some","includes","checkIsFixedSiderPage","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","unitSlice","isLoading","setUnitList","setIsLoading","errorMessageSlice","configureStore","reducer","cartReducer","orderReducer","courseReducer","teacherReducer","userReducer","memberReducer","unitReducer","errorMessageReducer","ReactDOM","StrictMode","dark","document","getElementById"],"mappings":"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","file":"static/js/main.57fbab96.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/carousel_1.0e1d997a.jpg\";","export default __webpack_public_path__ + \"static/media/carousel_1.28554dc6.webp\";","export default __webpack_public_path__ + \"static/media/carousel_2.06f516b6.jpg\";","export default __webpack_public_path__ + \"static/media/carousel_2.a59fa61c.webp\";","export default __webpack_public_path__ + \"static/media/carousel_3.68edf004.jpg\";","export default __webpack_public_path__ + \"static/media/carousel_3.ca64e629.webp\";","export const MEDIA_QUERY_MOBILE_M = '@media screen and (min-width: 375px)';\nexport const MEDIA_QUERY_MOBILE_L = '@media screen and (min-width: 480px)';\nexport const MEDIA_QUERY_TABLET = '@media screen and (min-width: 768px)';\nexport const MEDIA_QUERY_LAPTOP = '@media screen and (min-width: 1200px)';\n\n/* ant design breakpoint width#\n{\n  xs: '480px',\n  sm: '576px',\n  md: '768px',\n  lg: '992px',\n  xl: '1200px',\n  xxl: '1600px',\n}\n*/\n","export const BASE_URL = \"https://gagio-backend.ahwei777.tw/v1\";\n//export const BASE_URL = \"http://localhost:3002/v1\";","const TOKEN_NAME = \"token\";\n\nconst passwordRegExp = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,20}$/;\n\nexport const isStrongPassword = (password) => {\n  return passwordRegExp.test(password.toString());\n};\n\nexport const setAuthToken = (token) => {\n  localStorage.setItem(TOKEN_NAME, token);\n};\n\nexport const getAuthToken = () => localStorage.getItem(TOKEN_NAME);\n\nexport function toCurrency(num) {\n  var parts = num.toString().split(\".\");\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  return \"NT$\" + parts.join(\".\");\n}\n\nexport function translateAuth(AuthTypeId) {\n  switch (AuthTypeId) {\n    case 1:\n      return \"一般會員\";\n    case 2:\n      return \"開課者\";\n    case 3:\n      return \"管理員\";\n    default:\n      return \"未知\";\n  }\n}\n","import { BASE_URL } from '../constants/API_BASE_URL';\nimport { getAuthToken } from '../utils';\n\nexport const registerAPI = (email, password, nickname) =>\n  fetch(`${BASE_URL}/users/register`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    method: 'POST',\n    body: JSON.stringify({\n      email,\n      password,\n      nickname,\n    }),\n  }).then((res) => res.json());\n\nexport const loginAPI = (email, password) =>\n  fetch(`${BASE_URL}/users/login`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    method: 'POST',\n    body: JSON.stringify({\n      email,\n      password,\n    }),\n  }).then((res) => res.json());\n\nexport const getMeAPI = () =>\n  fetch(`${BASE_URL}/users/me`, {\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n  }).then((res) => res.json());\n\nexport const updateMyInfoAPI = (nickname) =>\n  fetch(`${BASE_URL}/users/me`, {\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n    method: 'PATCH',\n    body: JSON.stringify({\n      nickname,\n    }),\n  }).then((res) => res.json());\n\nexport const updateMyPasswordAPI = (oldPassword, newPassword) =>\n  fetch(`${BASE_URL}/users/password/me`, {\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n    method: 'PATCH',\n    body: JSON.stringify({\n      oldPassword,\n      newPassword,\n    }),\n  }).then((res) => res.json());\n\nexport const updateUserAuthAPI = (id, AuthTypeId) =>\n  fetch(`${BASE_URL}/users/${id}`, {\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n    method: 'PATCH',\n    body: JSON.stringify({\n      AuthTypeId,\n    }),\n  }).then((res) => res.json());\n","import { BASE_URL } from '../constants/API_BASE_URL';\nimport { getAuthToken } from '../utils';\n\nexport const getCartListAPI = () => {\n  return fetch(`${BASE_URL}/carts`, {\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n  }).then((res) => res.json());\n};\n\nexport const addCartItemAPI = (id) =>\n  fetch(`${BASE_URL}/carts/cart-item/${id}`, {\n    method: 'POST',\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n  }).then((res) => res.json());\n\nexport const deleteCartItemAPI = (id) =>\n  fetch(`${BASE_URL}/carts/cart-item/${id}`, {\n    method: 'DELETE',\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n  }).then((res) => res.json());\n","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-unresolved */\nimport { createSlice } from '@reduxjs/toolkit';\nimport { getCartListAPI, addCartItemAPI, deleteCartItemAPI } from '../../webAPI/cartAPI';\n\nexport const cartSlice = createSlice({\n  name: 'cart',\n  initialState: {\n    cartList: [],\n    isGettingCartList: false,\n    getCartListError: null,\n    isAddingCartItem: false,\n    addCartItemError: null,\n    isDeletingCartItem: false,\n    deleteCartItemError: null,\n  },\n  reducers: {\n    setCartList: (state, action) => {\n      console.log('setCartList')\n      state.cartList = action.payload;\n      state.getCartListError = null;\n    },\n    setIsGettingCartList: (state, action) => {\n      state.isGettingCartList = action.payload;\n    },\n    setGetCartListError: (state, action) => {\n      state.getCartListError = action.payload;\n    },\n    setIsAddingCartItem: (state, action) => {\n      state.isAddingCartItem = action.payload;\n    },\n    setAddCartItemError: (state, action) => {\n      state.addCartItemError = action.payload;\n    },\n    setIsDeletingCartItem: (state, action) => {\n      state.isDeletingCartItem = action.payload;\n    },\n    setDeleteCartItemError: (state, action) => {\n      state.deleteCartItemError = action.payload;\n    },\n  },\n});\n\n// action\nexport const {\n  setCartList,\n  setIsGettingCartList,\n  setGetCartListError,\n  setIsAddingCartItem,\n  setAddCartItemError,\n  setIsDeletingCartItem,\n  setDeleteCartItemError\n} = cartSlice.actions;\n\n// redux thunk function\nexport const getCartList = () => (dispatch) => {\n  console.log('thunk getCartList')\n  dispatch(setIsGettingCartList(true));\n  getCartListAPI().then((json) => {\n    if (json.ok === 0) {\n      dispatch(setCartList([]))\n      dispatch(setGetCartListError(json.errorMessage));\n      dispatch(setIsGettingCartList(false));\n      return;\n    }\n    dispatch(setCartList(json.data.cart_items))\n    dispatch(setIsGettingCartList(false));\n  }).catch(err => {\n    console.log('err: ', err)\n  });\n};\nexport const addCartItem = (id) => async (dispatch) => {\n  dispatch(setIsAddingCartItem(true));\n  await addCartItemAPI(id).then((json) => {\n    if (json.ok === 0) {\n      console.log(json.errorMessage)\n      dispatch(setAddCartItemError(json.errorMessage));\n      dispatch(setIsAddingCartItem(false));\n      return;\n    }\n    dispatch(setAddCartItemError(null));\n    dispatch(setIsAddingCartItem(false));\n  }).catch(err => {\n    console.log('err: ', err)\n  });\n  dispatch(getCartList());\n};\nexport const deleteCartItem = (id) => async (dispatch) => {\n  dispatch(setIsDeletingCartItem(true));\n  await deleteCartItemAPI(id).then((json) => {\n    if (json.ok === 0) {\n      dispatch(setDeleteCartItemError(json.errorMessage));\n      dispatch(setIsDeletingCartItem(false));\n      return;\n    }\n    dispatch(setDeleteCartItemError(null));\n    dispatch(setIsDeletingCartItem(false));\n  }).catch(err => {\n    console.log('err: ', err)\n  });\n  dispatch(getCartList());\n};\n// selector\nexport const selectCartList = (store) => store.cart.cartList;\n\nexport default cartSlice.reducer;\n","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-unresolved */\nimport { createSlice } from '@reduxjs/toolkit';\nimport {\n  loginAPI,\n  registerAPI,\n  getMeAPI,\n  updateMyInfoAPI,\n  updateMyPasswordAPI,\n  updateUserAuthAPI,\n} from '../../webAPI/userAPI';\nimport { getCartList, setCartList } from './cartReducer';\nimport { setAuthToken } from '../../utils';\n\nexport const userSlice = createSlice({\n  name: 'user',\n  initialState: {\n    user: null,\n    // 初始值設為 null 避免 render header 時因為還在確認使用者身分而跳字\n    isGettingUser: null,\n    errorMessage: null,\n  },\n  reducers: {\n    setUser: (state, action) => {\n      state.user = action.payload;\n    },\n    setIsGettingUser(state, action) {\n      state.isGettingUser = action.payload;\n    },\n    setUserErrorMessage: (state, action) => {\n      state.errorMessage = action.payload;\n    },\n  },\n});\n\n// action\nexport const {\n  setUser,\n  setIsGettingUser,\n  setUserErrorMessage,\n} = userSlice.actions;\n\n// redux thunk function\nexport const getMe = () => async (dispatch, getState) => {\n  const { isGettingUser } = getState();\n  if (!isGettingUser) {\n    // start\n    dispatch(setIsGettingUser(true));\n  }\n  await getMeAPI().then((json) => {\n    if (json.ok === 0) {\n      dispatch(setUser(null));\n      dispatch(setUserErrorMessage(json.errorMessage));\n      // finish\n      return dispatch(setIsGettingUser(false));\n    }\n    dispatch(getCartList());\n    dispatch(setUser(json.data));\n  });\n  // finish\n  return dispatch(setIsGettingUser(false));\n};\n\nexport const login = (email, password) => (dispatch) => {\n  if (!email || !password) {\n    return dispatch(setUserErrorMessage('missing field'));\n  }\n  // start\n  dispatch(setIsGettingUser(true));\n  return loginAPI(email, password).then((json) => {\n    if (json.ok === 1) {\n      //dispatch(setUserErrorMessage(json.errorMessage));\n      // finish\n      //return dispatch(setIsGettingUser(false));\n      setAuthToken(json.token);\n    }\n    return json;\n  });\n};\nexport const register = (email, password, nickname) => (dispatch) => {\n  if (!email || !password || !nickname) {\n    return dispatch(setUserErrorMessage('missing field'));\n  }\n  return registerAPI(email, password, nickname).then((json) => {\n    if (json.ok === 1) {\n      // finish\n      setAuthToken(json.token);\n      //return dispatch(getMe());\n    }\n    //dispatch(setUserErrorMessage(json.errorMessage));\n    // return dispatch(setIsGettingUser(false));\n    return json;\n  });\n};\nexport const logout = () => (dispatch) => {\n  setAuthToken('');\n  dispatch(setUser(null));\n  dispatch(setCartList([]));\n};\n\nexport const updateMyInfo = (nickname) => (dispatch) => {\n  return updateMyInfoAPI(nickname).then((res) => {\n    return res;\n  });\n};\n\nexport const updateMyPassword = (oldPassword, newPassword) => (dispatch) => {\n  // 前端已完成確認密碼\n  return updateMyPasswordAPI(oldPassword, newPassword).then((res) => {\n    return res;\n  });\n};\n\nexport const updateUserAuth = (id, email, nickname, authType) => (dispatch) => {\n  updateUserAuthAPI(id, email, nickname, authType).then((res) => {\n    if (res.ok === 0) {\n      return dispatch(setUserErrorMessage(res.errorMessage));\n    }\n  });\n};\n\n// selector\nexport const selectUser = (store) => store.user.user;\nexport const selectUserErrorMessage = (store) => store.user.errorMessage;\n\nexport default userSlice.reducer;\n","export default __webpack_public_path__ + \"static/media/LOGO.07bbf93b.png\";","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport { Badge, Button, Menu, Drawer, Grid, Input } from 'antd';\nimport { MEDIA_QUERY_TABLET } from '../../constants/breakpoint';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { logout, selectUser } from '../../redux/reducers/userReducer';\nimport { selectCartList } from '../../redux/reducers/cartReducer';\nimport { ShoppingCartOutlined } from '@ant-design/icons';\nimport LOGO from '../../img/LOGO.png';\n\nconst { useBreakpoint } = Grid;\nconst { Search } = Input;\n\nconst StyledSearch = styled(Search)`\n  width: 50%;\n  padding-left: 24px;\n  ${MEDIA_QUERY_TABLET} {\n    width: 150px;\n    padding: initial;\n  }\n`;\n\nconst StyledMenu = styled(Menu)`\n  font-size: 16px;\n  background: transparent;\n  border: none;\n  display: block;\n  ${MEDIA_QUERY_TABLET} {\n    display: flex;\n    align-items: center;\n  }\n`;\nconst HeaderContainer = styled.div`\n  background: white;\n  color: ${(props) => props.theme.colors.primary.text};\n  padding: 5px 15px;\n  box-shadow: 0 4px 4px 0 rgba(0, 0, 0, 0.2);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: sticky;\n  z-index: 9;\n  top: 0;\n`;\nconst Logo = styled(Link)`\n  width: 150px;\n  text-align: center;\n  & > img {\n    height: 52px;\n  }\n`;\nconst NavContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  ${MEDIA_QUERY_TABLET} {\n    flex: 1;\n  }\n`;\n// RWD 隱藏切換\nconst NavToggleGroup = styled.div`\n  display: none;\n  ${MEDIA_QUERY_TABLET} {\n    display: block;\n  }\n`;\nconst NavRightPart = styled.div`\n  display: flex;\n  align-items: center;\n`;\nconst NavToggler = styled(Button)`\n  height: 32px;\n  padding: 6px;\n  display: inline-block;\n  background: none;\n  margin-left: 30px;\n  ${MEDIA_QUERY_TABLET} {\n    display: none;\n  }\n`;\nconst NavTogglerBody = styled.div`\n  display: block;\n  width: 20px;\n  height: 2px;\n  background: ${(props) => props.theme.colors.primary.light};\n  position: relative;\n  ::after,\n  ::before {\n    content: attr(x);\n    width: 20px;\n    position: absolute;\n    top: -6px;\n    left: 0;\n    height: 2px;\n    background: ${(props) => props.theme.colors.primary.light};\n  }\n  ::after {\n    top: auto;\n    bottom: -6px;\n  }\n`;\nconst CartIcon = styled(ShoppingCartOutlined)`\n  color: ${(props) => props.theme.colors.primary.text};\n  font-size: 24px;\n  :hover {\n    color: ${(props) => props.theme.colors.primary.light};\n  }\n`;\n\nconst LeftMenu = ({\n  searchValue,\n  setSearchValue,\n  onSearch,\n  handleClose,\n  currentKey,\n}) => {\n  const { md } = useBreakpoint();\n  return (\n    <StyledMenu\n      mode={md ? 'horizontal' : 'inline'}\n      onClick={handleClose}\n      selectedKeys={currentKey}\n    >\n      <StyledSearch\n        value={searchValue}\n        onChange={(e) => setSearchValue(e.value)}\n        placeholder=\"搜尋課程\"\n        onSearch={onSearch}\n      />\n\n      <Menu.Item key=\"courses\">\n        <Link to=\"/courses\">課程列表</Link>\n      </Menu.Item>\n    </StyledMenu>\n  );\n};\n\nconst RightMenu = ({ user, handleLogout, handleClose, currentKey }) => {\n  const { md } = useBreakpoint();\n  return (\n    <StyledMenu\n      mode={md ? 'horizontal' : 'inline'}\n      onClick={handleClose}\n      selectedKeys={currentKey}\n    >\n      {user && (\n        <>\n          {user.authTypeId === 1 && (\n            <Menu.Item key=\"teacher-apply\">\n              <Link to=\"/teacher-apply\">申請開課</Link>\n            </Menu.Item>\n          )}\n          <Menu.Item key=\"my-course\">\n            <Link to=\"/my-course\">我的課程</Link>\n          </Menu.Item>\n          <Menu.Item key=\"myAccount\">\n            <Link to=\"/me\">帳號設定</Link>\n          </Menu.Item>\n          {user.authTypeId === 2 && (\n            <Menu.Item key=\"teacher\">\n              <Link to=\"/teacher\">老師後台</Link>\n            </Menu.Item>\n          )}\n          {user.authTypeId === 3 && (\n            <Menu.Item key=\"console\">\n              <Link to=\"/console\">管理後台</Link>\n            </Menu.Item>\n          )}\n          <Menu.Item key=\"logout\" onClick={handleLogout}>\n            <Link to=\"/\">登出</Link>\n          </Menu.Item>\n        </>\n      )}\n      {!user && (\n        <>\n          <Menu.Item key=\"register\">\n            <Link to=\"/register\">註冊</Link>\n          </Menu.Item>\n          <Menu.Item key=\"login\">\n            <Link to=\"/login\">登入</Link>\n          </Menu.Item>\n        </>\n      )}\n    </StyledMenu>\n  );\n};\n\nfunction getCurrentKey(pathname) {\n  if (pathname.indexOf('/courses') === 0) return 'courses';\n  if (pathname.indexOf('/teacher-apply') === 0) return 'teacher-apply';\n  if (pathname.indexOf('/my-course') === 0) return 'my-course';\n  if (pathname.indexOf('/me') === 0) return 'myAccount';\n  if (pathname.indexOf('/teacher') === 0) return 'teacher';\n  if (pathname.indexOf('/console') === 0) return 'console';\n  if (pathname.indexOf('/register') === 0) return 'register';\n  if (pathname.indexOf('/login') === 0) return 'login';\n  return 'index';\n}\n\nexport default function Header() {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const location = useLocation();\n  const pathname = location.pathname;\n  const cartList = useSelector(selectCartList);\n  const user = useSelector(selectUser);\n  const [searchValue, setSearchValue] = useState('');\n  const [currentKey, setCurrentKey] = useState('');\n\n  useEffect(() => {\n    console.log('getKey');\n    setCurrentKey(getCurrentKey(pathname));\n  }, [pathname]);\n\n  const onSearch = (value) => {\n    if (value) {\n      setSearchValue('');\n      history.push(`/courses?keyword=${value}`);\n    }\n  };\n\n  const handleLogout = () => {\n    dispatch(logout());\n  };\n\n  const [state, setState] = useState({ visible: false });\n\n  const handleClick = () => {\n    setState({\n      visible: true,\n    });\n  };\n  const handleClose = () => {\n    setState({\n      visible: false,\n    });\n  };\n\n  return (\n    <HeaderContainer>\n      <Logo to=\"/\">\n        <img src={LOGO} alt=\"img not found\" />\n      </Logo>\n      <NavContainer>\n        <NavToggleGroup>\n          <LeftMenu\n            searchValue={searchValue}\n            onSearch={onSearch}\n            setSearchValue={setSearchValue}\n            currentKey={currentKey}\n          />\n        </NavToggleGroup>\n        <NavRightPart>\n          <Badge count={cartList.length} offset={[10]}>\n            <Link to=\"/cart\">\n              <CartIcon />\n            </Link>\n          </Badge>\n          <NavToggleGroup>\n            <RightMenu\n              user={user}\n              cartList={cartList}\n              handleLogout={handleLogout}\n              currentKey={currentKey}\n            />\n          </NavToggleGroup>\n        </NavRightPart>\n        <NavToggler onClick={handleClick}>\n          <NavTogglerBody />\n        </NavToggler>\n        <Drawer\n          title=\"GaGiO\"\n          placement=\"top\"\n          closable={false}\n          onClose={handleClose}\n          visible={state.visible}\n        >\n          <LeftMenu\n            searchValue={searchValue}\n            onSearch={onSearch}\n            setSearchValue={setSearchValue}\n            handleClose={handleClose}\n            currentKey={currentKey}\n          />\n          <RightMenu\n            user={user}\n            cartList={cartList}\n            handleLogout={handleLogout}\n            handleClose={handleClose}\n            currentKey={currentKey}\n          />\n        </Drawer>\n      </NavContainer>\n    </HeaderContainer>\n  );\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Row, Col } from 'antd';\nimport {\n  FacebookFilled,\n  TwitterSquareFilled,\n  InstagramFilled,\n  GithubOutlined,\n} from '@ant-design/icons';\n\nconst FooterContainer = styled.div`\n  text-align: center;\n  padding: 12px 24px;\n  background: ${(props) => props.theme.colors.grey};\n  color: ${(props) => props.theme.colors.primary.text};\n`;\nconst MediaCol = styled(Col)`\n  display: flex;\n  flex-direction: column;\n`;\nconst MediaWrapper = styled.div`\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  & span {\n    font-size: 24px;\n    transition: all 0.5s;\n    :hover {\n      cursor: pointer;\n      font-size: 36px;\n    }\n  }\n`;\n\nexport default function Footer() {\n  //const themeContext = useContext(ThemeContext);\n\n  return (\n    <FooterContainer>\n      <Row gutter={[0, { sm: 24, md: 0 }]}>\n        <Col xs={12} md={6}>\n          <h3>\n            <strong>關於我們</strong>\n          </h3>\n          <div>加入我們</div>\n          <div>服務條款</div>\n        </Col>\n        <MediaCol xs={12} md={6}>\n          <h3>\n            <strong>追蹤動態</strong>\n          </h3>\n          <MediaWrapper>\n            <FacebookFilled />\n            <TwitterSquareFilled />\n            <InstagramFilled />\n            <a\n              href=\"https://github.com/ahwei777/GaGiO-frontend\"\n              style={{ color: 'black' }}\n            >\n              <GithubOutlined />\n            </a>\n          </MediaWrapper>\n        </MediaCol>\n        <Col\n          xs={24}\n          md={12}\n          style={{\n            fontSize: 24,\n          }}\n        >\n          <div>GaGiO © All Rights Reserved.</div>\n          {/* credits */}\n          <div\n            style={{\n              fontSize: 12,\n            }}\n          >\n            <a href=\"https://www.freepik.com/vectors/technology\">\n              Technology vector created by vectorjuice - www.freepik.com\n            </a>\n            <div>\n              Icons made by{' '}\n              <a href=\"https://www.freepik.com\" title=\"Freepik\">\n                Freepik\n              </a>{' '}\n              from{' '}\n              <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">\n                www.flaticon.com\n              </a>\n            </div>\n          </div>\n\n          {/* credits */}\n        </Col>\n      </Row>\n    </FooterContainer>\n  );\n}\n","import React from 'react';\nimport { Card, Avatar, Spin } from 'antd';\nimport styled from 'styled-components';\nimport { Link } from 'react-router-dom';\nimport { toCurrency } from '../../utils';\nimport LazyLoad from 'react-lazyload';\n\nconst { Meta } = Card;\nconst CardWrapper = styled.div`\n  border: ${(props) => props.theme.colors.primary.main} 1px solid;\n  border-bottom: ${(props) => props.theme.colors.primary.main} 5px solid;\n  :hover {\n    opacity: 0.7;\n  }\n`;\nconst StyledImg = styled.img`\n  display: block;\n  width: 100%;\n`;\nconst ImgPlaceholder = styled(Spin)`\n  height: 200px;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: rgba(0, 0, 0, 0.05);\n`;\nconst TeacherLink = styled(Link)`\n  position: absolute;\n  left: 8%;\n  top: 8%;\n  transition: all 0.5s;\n  :hover {\n    transform: scale(1.3);\n  }\n`;\nconst Price = styled.div`\n  font-size: 24px;\n  font-weight: bold;\n  text-align: right;\n  color: ${(props) => props.theme.colors.primary.main};\n`;\n\nexport default function CourseCard({ course, isBought }) {\n  return (\n    <>\n      <Link to={`/courses/${course.id}`}>\n        <CardWrapper>\n          <Card\n            cover={\n              <LazyLoad placeholder={<ImgPlaceholder />} offset={100} once>\n                <StyledImg alt=\"unavailable\" src={course.imgUrl} />\n              </LazyLoad>\n            }\n          >\n            <Meta title={course.title} />\n            {!isBought && <Price>{toCurrency(course.price)}</Price>}\n          </Card>\n        </CardWrapper>\n      </Link>\n      {course.Teacher && (\n        <TeacherLink to={`/teacher-info/${course.TeacherId}`}>\n          <Avatar size={'large'} src={course.Teacher.avatarUrl} />\n        </TeacherLink>\n      )}\n    </>\n  );\n}\n","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-unresolved */\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport {\n  getCourseListAPI,\n  getCourseAPI,\n  addCourseAPI,\n  updateCourseAPI,\n  getMyCourseListAPI,\n  getMyTeachCourseListAPI,\n  getDetailCourseAPI,\n  getUnitByUnitIdAPI,\n  updateUnitByUnitIdAPI\n} from \"../../webAPI/courseAPI\";\n\nexport const courseSlice = createSlice({\n  name: \"course\",\n  initialState: {\n    isGettingCourse: false,\n    getCourseError: null,\n    courseList: [],\n    course: null,\n    myCourseList: null,\n    myTeachCourseList: null,\n    detailCourse: null,\n    unit: null,\n  },\n  reducers: {\n    setCourseList: (state, action) => {\n      state.courseList = action.payload;\n      state.getCourseError = null;\n    },\n    setIsGettingCourse: (state, action) => {\n      state.isGettingCourse = action.payload;\n    },\n    setGetCourseError: (state, action) => {\n      state.getCourseError = action.payload;\n    },\n    setCourse: (state, action) => {\n      state.course = action.payload;\n      state.getCourseError = null;\n    },\n    setMyCourseList: (state, action) => {\n      state.myCourseList = action.payload;\n      state.getCourseError = null;\n    },\n    setMyTeachCourseList: (state, action) => {\n      state.myTeachCourseList = action.payload;\n      state.getCourseError = null;\n    },\n    setDetailCourse: (state, action) => {\n      state.detailCourse = action.payload;\n      state.getCourseError = null;\n    },\n    setUnit: (state, action) => {\n      state.unit = action.payload;\n      state.getCourseError = null;\n    },\n  },\n});\n\n// action\nexport const {\n  setIsGettingCourse,\n  setGetCourseError,\n  setCourseList,\n  setCourse,\n  setMyCourseList,\n  setMyTeachCourseList,\n  setDetailCourse,\n  setUnit\n} = courseSlice.actions;\n\n// redux thunk function\nexport const getCourseList = (params) => (dispatch) => {\n  dispatch(setIsGettingCourse(true));\n  getCourseListAPI(params)\n    .then((json) => {\n      if (json.ok === 0) {\n        dispatch(setGetCourseError(json.errorMessage));\n        dispatch(setIsGettingCourse(false));\n        return;\n      }\n      // success\n      dispatch(setCourseList(json.data));\n      dispatch(setIsGettingCourse(false));\n    })\n    .catch((err) => {\n      console.log(\"err: \", err);\n    });\n};\nexport const getCourse = (id) => (dispatch) => {\n  dispatch(setIsGettingCourse(true));\n  getCourseAPI(id)\n    .then((json) => {\n      if (json.ok === 0) {\n        dispatch(setGetCourseError(json.errorMessage));\n        dispatch(setIsGettingCourse(false));\n        return;\n      }\n      // success\n      dispatch(setCourse(json.data));\n      dispatch(setIsGettingCourse(false));\n    })\n    .catch((err) => {\n      console.log(\"err: \", err);\n    });\n};\nexport const getMyCourseList = () => (dispatch) => {\n  dispatch(setIsGettingCourse(true));\n  getMyCourseListAPI()\n    .then((json) => {\n      if (json.ok === 0) {\n        dispatch(setGetCourseError(json.errorMessage));\n        dispatch(setIsGettingCourse(false));\n        return;\n      }\n      // success\n      dispatch(setMyCourseList(json.data));\n      dispatch(setIsGettingCourse(false));\n    })\n    .catch((err) => {\n      console.log(\"err: \", err);\n    });\n};\nexport const getMyTeachCourseList = () => (dispatch) => {\n  dispatch(setIsGettingCourse(true));\n  getMyTeachCourseListAPI()\n    .then((json) => {\n      if (json.ok === 0) {\n        dispatch(setGetCourseError(json.errorMessage));\n        dispatch(setIsGettingCourse(false));\n        return;\n      }\n      // success\n      dispatch(setMyTeachCourseList(json.data));\n      dispatch(setIsGettingCourse(false));\n    })\n    .catch((err) => {\n      console.log(\"err: \", err);\n    });\n};\n\n\n\nexport const addCourse = ({ title, description, price, imgUrl }) => (dispatch) => {\n  return addCourseAPI(title, price, description, imgUrl)\n    .then((json) => {\n      return json\n    })\n    .catch((err) => {\n      console.log(\"err: \", err);\n    });\n};\n\nexport const updateCourse = (courseId, {title, price, description, isPublic, unit_list, imgUrl }) => (\n  dispatch\n) => {\n  if (!courseId || !title || price < 0 || !description || isPublic === undefined || !unit_list || !imgUrl) return;\n  return updateCourseAPI(courseId, {title, price, description, isPublic, unit_list, imgUrl})\n    .then((json) => {\n      return json;\n    })\n    .catch((err) => {\n      console.log(\"err: \", err);\n    });\n};\n\n\nexport const getDetailCourse = (courseId) => (dispatch) => {\n  dispatch(setIsGettingCourse(true));\n  getDetailCourseAPI(courseId)\n    .then((json) => {\n      if (json.ok === 0) {\n        dispatch(setGetCourseError(json.errorMessage));\n        dispatch(setIsGettingCourse(false));\n        return;\n      }\n      // success\n      dispatch(setDetailCourse({...json.data, unit_list: JSON.parse(json.data.unit_list)}));\n      dispatch(setIsGettingCourse(false));\n    })\n    .catch((err) => {\n      console.log(\"err: \", err);\n    });\n};\n\nexport const getUnitByUnitId = (courseId, unitId) => (dispatch) => {\n  dispatch(setIsGettingCourse(true));\n  getUnitByUnitIdAPI(courseId, unitId)\n    .then((json) => {\n      if (json.ok === 0) {\n        dispatch(setGetCourseError(json.errorMessage));\n        dispatch(setIsGettingCourse(false));\n        return;\n      }\n      // success\n      dispatch(setUnit(json.data));\n      dispatch(setIsGettingCourse(false));\n    })\n    .catch((err) => {\n      console.log(\"err: \", err);\n    });\n};\n\nexport const updateUnitByUnitId = (courseId, unitId, unit) => (dispatch) => {\n  dispatch(setIsGettingCourse(true));\n  return updateUnitByUnitIdAPI(courseId, unitId, unit)\n    .then((json) => {\n      if (json.ok === 0) {\n        dispatch(setGetCourseError(json.errorMessage));\n        dispatch(setIsGettingCourse(false));\n        return json;\n      }\n      // success\n      dispatch(setIsGettingCourse(false));\n      return json;\n    })\n    .catch((err) => {\n      console.log(\"err: \", err);\n    });\n};\n\n// selector\nexport const selectIsGettingCourse = (store) => store.course.isGettingCourse;\nexport const selectCourseList = (store) => store.course.courseList;\nexport const selectCourse = (store) => store.course.course;\nexport const selectMyCourseList = (store) => store.course.myCourseList;\nexport const selectMyTeachCourseList = (store) => store.course.myTeachCourseList;\nexport const selectDetailCourse = (store) => store.course.detailCourse;\nexport const selectUnit = (store) => store.course.unit;\n\nexport default courseSlice.reducer;\n","import { BASE_URL } from '../constants/API_BASE_URL';\nimport { getAuthToken } from '../utils';\n\nexport const getCourseListAPI = ({\n  keyword = '',\n  page = '',\n  limit='',\n  sort = 'id',\n  order = 'ASC',\n  getPublic = '',\n} = {}) => {\n  console.log('keyword', keyword);\n  return fetch(\n    `${BASE_URL}/courses?_keyword=${keyword}&_sort=${sort}&_order=${order}&_page=${page}&_limit=${limit}&_public=${getPublic}`,\n    {\n      headers: {\n        Authorization: `Bearer ${getAuthToken()}`,\n      },\n    }\n  ).then((res) => res.json());\n};\n\nexport const getCourseAPI = (id) =>\n  fetch(`${BASE_URL}/courses/${id}`, {\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n  }).then((res) => res.json());\n\nexport const addCourseAPI = (title, price, description, imgUrl) =>\n  fetch(`${BASE_URL}/courses`, {\n    method: 'POST',\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify({\n      title,\n      price,\n      description,\n      imgUrl,\n    }),\n  }).then((res) => res.json());\n\n// XX\nexport const deleteCourseAPI = (id) =>\n  fetch(`${BASE_URL}/courses/${id}`, {\n    method: 'DELETE',\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n  }).then((res) => res.json());\n\nexport const updateCourseAPI = (\n  courseId,\n  { title, price, description, isPublic, unit_list, imgUrl }\n) =>\n  fetch(`${BASE_URL}/courses/${courseId}`, {\n    method: 'PATCH',\n    headers: {\n      'content-type': 'application/json',\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n    body: JSON.stringify({\n      title,\n      price,\n      description,\n      isPublic,\n      unit_list,\n      imgUrl,\n    }),\n  }).then((res) => res.json());\n\n//XX\nexport const addUnitListAPI = (courseId) =>\n  fetch(`${BASE_URL}/unit`, {\n    method: 'POST',\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify({ courseId, unit_list: [] }),\n  }).then((res) => res.json());\n\n//XX\nexport const getUnitListAPI = (courseId) =>\n  fetch(`${BASE_URL}/courses/${courseId}/units`, {\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n  }).then((res) => res.json());\n\n//XX\nexport const updateUnitListAPI = (courseId, unitList) =>\n  fetch(`${BASE_URL}/courses/${courseId}/units`, {\n    method: 'PATCH',\n    headers: {\n      'content-type': 'application/json',\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n    body: JSON.stringify({\n      unit_list: unitList,\n    }),\n  }).then((res) => res.json());\n\nexport const getMyCourseListAPI = () =>\n  fetch(`${BASE_URL}/courses/bought-courses/me`, {\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n  }).then((res) => res.json());\n\nexport const getMyTeachCourseListAPI = () =>\n  fetch(`${BASE_URL}/courses/teach-courses/me`, {\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n  }).then((res) => res.json());\n\nexport const getDetailCourseAPI = (courseId) =>\n  fetch(`${BASE_URL}/courses/detail/${courseId}`, {\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n  }).then((res) => res.json());\n\nexport const getUnitByUnitIdAPI = (courseId, unitId) =>\n  fetch(`${BASE_URL}/courses/${courseId}/units/${unitId}`, {\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n  }).then((res) => res.json());\n\nexport const updateUnitByUnitIdAPI = (courseId, unitId, unit) =>\n  fetch(`${BASE_URL}/courses/${courseId}/units/${unitId}`, {\n    method: 'PATCH',\n    headers: {\n      'content-type': 'application/json',\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n    body: JSON.stringify({\n      unit,\n    }),\n  }).then((res) => res.json());\n","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Row, Col, Spin } from 'antd';\nimport CourseCard from '../../components/CourseCard';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  selectCourseList,\n  selectIsGettingCourse,\n  getCourseList,\n  setCourseList,\n} from '../../redux/reducers/courseReducer';\nimport 'react-responsive-carousel/lib/styles/carousel.min.css'; // requires a loader\nimport { Carousel } from 'react-responsive-carousel';\nimport Image from 'react-image-webp';\n\nconst PageWrapper = styled.div``;\nconst Intro = styled.div`\n  color: ${(props) => props.theme.colors.primary.main};\n  font-size: 24px;\n  font-weight: bold;\n  text-align: center;\n  padding: 12px;\n`;\n\nconst CoursesWrapper = styled.div`\n  padding: 0px 24px;\n`;\nconst TitleLatestCourse = styled.div`\n  color: ${(props) => props.theme.colors.primary.main};\n  font-size: 28px;\n  font-weight: bold;\n  text-align: left;\n  padding: 12px;\n`;\nconst LoadingWrapper = styled.div`\n  padding: 100px 0;\n  text-align: center;\n`;\n\nexport default function CourseListPage() {\n  const dispatch = useDispatch();\n  const courseList = useSelector(selectCourseList);\n  const isGettingCourseList = useSelector(selectIsGettingCourse);\n\n  // component mount 時執行(初始化)\n  useEffect(() => {\n    // 取得最新上架課程\n    dispatch(\n      getCourseList({\n        page: 1,\n        limit: 8,\n        order: 'DESC',\n      })\n    );\n    // unmount 時先 clean up 避免下次回來時因為仍有舊資料而短暫顯示\n    return () => {\n      dispatch(setCourseList([]));\n    };\n  }, [dispatch]);\n\n  return (\n    <>\n      <PageWrapper>\n        <Intro>\n          <div>不受時間與空間限制，自由享受學習與教學</div>\n        </Intro>\n        {/* Carousel */}\n        <Carousel\n          showThumbs={false}\n          showStatus={false}\n          autoPlay={true}\n          infiniteLoop={true}\n        >\n          <div>\n            <Image\n              alt=\"img\"\n              src={require('../../img/no-webp/carousel_1.jpg')}\n              webp={require('../../img/webp/carousel_1.webp')}\n            />\n          </div>\n          <div>\n            <Image\n              alt=\"img\"\n              src={require('../../img/no-webp/carousel_2.jpg')}\n              webp={require('../../img/webp/carousel_2.webp')}\n            />\n          </div>\n          <div>\n            <Image\n              alt=\"img\"\n              src={require('../../img/no-webp/carousel_3.jpg')}\n              webp={require('../../img/webp/carousel_3.webp')}\n            />\n          </div>\n        </Carousel>\n        <CoursesWrapper>\n          <TitleLatestCourse>最新上架課程</TitleLatestCourse>\n          {isGettingCourseList && (\n            <LoadingWrapper>\n              <Spin size=\"large\" />\n            </LoadingWrapper>\n          )}\n          {!isGettingCourseList && courseList.length === 0 ? (\n            <Intro>查無課程</Intro>\n          ) : (\n            <Row gutter={[{ xs: 16, sm: 20, md: 24, lg: 32 }, 36]}>\n              {courseList\n                .filter((course) => course.isPublic)\n                .map((course) => (\n                  <Col key={course.id} xs={12} md={8} lg={6}>\n                    <CourseCard course={course} />\n                  </Col>\n                ))}\n            </Row>\n          )}\n        </CoursesWrapper>\n      </PageWrapper>\n    </>\n  );\n}\n","import React from 'react';\nimport { Form, Input, Button, message } from 'antd';\nimport styled from 'styled-components';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { login, getMe, selectUser } from '../../redux/reducers/userReducer';\nimport { useHistory, Link } from 'react-router-dom';\n\nconst LoginBox = styled.div`\n  padding-top: 10px;\n  margin: 16px auto;\n  align-items: center;\n  border: 1px solid ${(props) => props.theme.colors.primary.main};\n  border-radius: 8px;\n  max-width: 750px;\n  text-align: center;\n`;\nconst FormTitle = styled.div`\n  font-size: 32px;\n  padding-bottom: 18px;\n`;\n/*\nconst StyledButton = styled(Button)`\n  background-color: ${(props) => props.theme.colors.primary.light};\n  transition: tranform 0.3s;\n  &:hover {\n    background-color: #ffffff;\n    color: ${(props) => props.theme.colors.primary.main};\n    border: 1px solid ${(props) => props.theme.colors.primary.main};\n  }\n  &:visited {\n    background-color: ${(props) => props.theme.colors.primary.light};\n    border: 0;\n    color: #000000;\n  }\n`;\n*/\nconst NoAccountMessage = styled(Link)`\n  font-size: 16px;\n  color: ${(props) => props.theme.colors.primary.main};\n  &:hover {\n    font-weight: bold;\n  }\n`;\nconst StyledForm = styled(Form)`\n  margin: 10px auto;\n`;\n\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 12,\n  },\n};\nconst tailLayout = {\n  wrapperCol: {\n    span: 24,\n  },\n};\nconst validateMessages = {\n  required: '${label} is required',\n  types: {\n    email: '請輸入正確信箱格式',\n  },\n};\n\nexport default function Login() {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const user = useSelector(selectUser);\n\n  React.useEffect(() => {\n    if (user) {\n      return history.push('/');\n    }\n  }, [user, history]);\n\n  const handleFinish = (value) => {\n    const { email, password } = value;\n    message.loading({\n      content: '登入中',\n      key: 'isLogging',\n      duration: 0,\n    });\n    dispatch(login(email, password)).then((json) => {\n      if (json.ok === 1) {\n        message.success({\n          content: '登入成功',\n          key: 'isLogging',\n          duration: 5,\n        });\n        dispatch(getMe());\n        return history.push('/');\n      }\n      return message.error({\n        content: json.errorMessage,\n        key: 'isLogging',\n        duration: 5,\n      });\n    });\n  };\n\n  return (\n    <LoginBox>\n      <FormTitle>登入</FormTitle>\n      <NoAccountMessage to=\"/register\">還沒有帳號?</NoAccountMessage>\n      <StyledForm\n        {...layout}\n        name=\"login\"\n        onFinish={handleFinish}\n        validateMessages={validateMessages}\n      >\n        <Form.Item\n          label=\"Email\"\n          name=\"email\"\n          rules={[{ required: true, type: 'email' }]}\n        >\n          <Input placeholder=\"請輸入您註冊的電子信箱\" />\n        </Form.Item>\n        <Form.Item\n          label=\"Password\"\n          name=\"password\"\n          rules={[{ required: true }]}\n        >\n          <Input.Password placeholder=\"請輸入您註冊的密碼\" />\n        </Form.Item>\n        <Form.Item {...tailLayout}>\n          <Button htmlType=\"submit\" type=\"primary\">\n            Submit\n          </Button>\n        </Form.Item>\n      </StyledForm>\n    </LoginBox>\n  );\n}\n","import React from 'react';\nimport { Form, Input, Button, message } from 'antd';\nimport styled from 'styled-components';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { register, getMe, selectUser } from '../../redux/reducers/userReducer';\nimport { useHistory, Link } from 'react-router-dom';\nimport { isStrongPassword } from '../../utils';\n\nconst RegisterBox = styled.div`\n  padding-top: 10px;\n  margin: 16px auto;\n  align-items: center;\n  border: 1px solid ${(props) => props.theme.colors.primary.main};\n  border-radius: 8px;\n  max-width: 750px;\n  text-align: center;\n`;\nconst FormTitle = styled.div`\n  font-size: 32px;\n  padding-bottom: 10px;\n`;\nconst HasAccountMessage = styled(Link)`\n  font-size: 16px;\n  color: ${(props) => props.theme.colors.primary.main};\n  &:hover {\n    font-weight: bold;\n  }\n`;\nconst StyledForm = styled(Form)`\n  margin: 10px auto;\n`;\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 12,\n  },\n};\nconst tailLayout = {\n  wrapperCol: {\n    span: 24,\n  },\n};\nconst validateMessages = {\n  required: '此為必填項目',\n  types: {\n    email: '請輸入正確信箱格式',\n  },\n};\n\nexport default function Register() {\n  const history = useHistory();\n  const user = useSelector(selectUser);\n  const dispatch = useDispatch();\n\n  React.useEffect(() => {\n    if (user) {\n      history.push('/');\n    }\n  }, [user, history]);\n\n  const handleFinish = (value) => {\n    const { email, password, nickname } = value;\n    message.loading({\n      content: '註冊中',\n      key: 'isRegistering',\n      duration: 0,\n    });\n    dispatch(register(email, password, nickname)).then((json) => {\n      if (json.ok === 1) {\n        message.success({\n          content: '註冊成功',\n          key: 'isRegistering',\n          duration: 5,\n        });\n        dispatch(getMe());\n        return history.push('/');\n      }\n      return message.error({\n        content: json.errorMessage,\n        key: 'isRegistering',\n        duration: 5,\n      });\n    });\n  };\n\n  return (\n    <RegisterBox>\n      <FormTitle>註冊</FormTitle>\n      <HasAccountMessage to=\"/login\">已經有帳號了?</HasAccountMessage>\n      <StyledForm\n        {...layout}\n        name=\"register\"\n        onFinish={handleFinish}\n        validateMessages={validateMessages}\n      >\n        <Form.Item\n          label=\"Email\"\n          name=\"email\"\n          rules={[\n            {\n              type: 'email',\n              required: true,\n            },\n          ]}\n        >\n          <Input placeholder=\"請輸入電子信箱\" />\n        </Form.Item>\n        <Form.Item\n          label=\"Nickname\"\n          name=\"nickname\"\n          rules={[\n            {\n              required: true,\n            },\n          ]}\n        >\n          <Input placeholder=\"請輸入暱稱\" />\n        </Form.Item>\n        <Form.Item\n          label=\"Password\"\n          name=\"password\"\n          rules={[\n            {\n              required: true,\n            },\n            ({ getFieldValue }) => ({\n              validator(_, inputValue) {\n                if (!inputValue || isStrongPassword(inputValue)) {\n                  return Promise.resolve();\n                }\n                return Promise.reject('密碼規則不符!');\n              },\n            }),\n          ]}\n          extra=\"8～20個字，包含大寫、小寫字母和數字\"\n        >\n          <Input.Password placeholder=\"請輸入密碼\" />\n        </Form.Item>\n        <Form.Item\n          label=\"Confirm Password\"\n          name=\"confirm\"\n          dependencies={['password']}\n          extra=\"請再次輸入密碼\"\n          rules={[\n            {\n              required: true,\n            },\n            ({ getFieldValue }) => ({\n              validator(_, inputValue) {\n                if (!inputValue || getFieldValue('password') === inputValue) {\n                  return Promise.resolve();\n                }\n                return Promise.reject('密碼和確認密碼不相同!');\n              },\n            }),\n          ]}\n        >\n          <Input.Password />\n        </Form.Item>\n        <Form.Item {...tailLayout}>\n          <Button htmlType=\"submit\" type=\"primary\" size=\"large\">\n            註冊\n          </Button>\n        </Form.Item>\n      </StyledForm>\n    </RegisterBox>\n  );\n}\n","import React, {\n  useEffect,\n  useRef,\n  useImperativeHandle,\n  forwardRef,\n} from 'react';\nimport { Form, Input, Button, Modal, message } from 'antd';\nimport styled from 'styled-components';\nimport { useDispatch } from 'react-redux';\nimport {\n  setUserErrorMessage,\n  updateMyPassword,\n  logout,\n} from '../../../redux/reducers/userReducer';\nimport { useHistory } from 'react-router';\nimport { isStrongPassword } from '../../../utils';\n\nconst BoxWrapper = styled.div`\n  text-align: center;\n`;\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 12,\n  },\n};\nconst tailLayout = {\n  wrapperCol: {\n    span: 24,\n  },\n};\nconst validateMessages = {\n  required: '此為必填項目',\n};\n\nconst UpdateForm = forwardRef(({ setModalText }, ref) => {\n  const [form] = Form.useForm();\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  useImperativeHandle(ref, () => ({\n    resetForm: () => {\n      form.resetFields();\n      dispatch(setUserErrorMessage(null));\n    },\n  }));\n\n  const handleFinish = (value) => {\n    const { oldPassword, newPassword } = value;\n    message.loading({\n      content: '變更密碼中',\n      key: 'isUpdating',\n      duration: 0,\n    });\n\n    dispatch(updateMyPassword(oldPassword, newPassword)).then((json) => {\n      // 更新成功 登出\n      if (json.ok === 1) {\n        message.success({\n          content: '變更密碼成功',\n          key: 'isUpdating',\n          duration: 5,\n        });\n        setModalText('更新成功，將於三秒後登出，請使用新密碼重新登入');\n        return setTimeout(() => {\n          dispatch(logout());\n          history.push('/login');\n        }, 3000);\n      }\n      // 更新失敗,設置錯誤訊息\n      message.error({\n        content: json.errorMessage,\n        key: 'isUpdating',\n        duration: 5,\n      });\n    });\n  };\n\n  return (\n    <BoxWrapper>\n      <Form\n        form={form}\n        {...layout}\n        name=\"updatePassword\"\n        onFinish={handleFinish}\n        validateMessages={validateMessages}\n      >\n        <Form.Item\n          label=\"舊密碼\"\n          name=\"oldPassword\"\n          rules={[{ required: true }]}\n        >\n          <Input.Password />\n        </Form.Item>\n        <Form.Item\n          label=\"新密碼\"\n          name=\"newPassword\"\n          rules={[\n            { required: true },\n            ({ getFieldValue }) => ({\n              validator(_, inputValue) {\n                if (!inputValue || isStrongPassword(inputValue)) {\n                  return Promise.resolve();\n                }\n                return Promise.reject('密碼規則不符!');\n              },\n            }),\n          ]}\n          extra=\"8～20個字，至少一個數字、一個大寫以及一個小寫字母\"\n        >\n          <Input.Password />\n        </Form.Item>\n        <Form.Item\n          label=\"確認密碼\"\n          name=\"confirm\"\n          dependencies={['newPassword']}\n          rules={[\n            { required: true },\n            ({ getFieldValue }) => ({\n              validator(_, inputValue) {\n                if (\n                  !inputValue ||\n                  getFieldValue('newPassword') === inputValue\n                ) {\n                  return Promise.resolve();\n                }\n                return Promise.reject('密碼和確認密碼不相同!');\n              },\n            }),\n          ]}\n          extra=\"請再次輸入密碼\"\n        >\n          <Input.Password />\n        </Form.Item>\n        <Form.Item {...tailLayout}>\n          <Button htmlType=\"submit\" type=\"primary\">\n            確定\n          </Button>\n        </Form.Item>\n      </Form>\n    </BoxWrapper>\n  );\n});\n\nexport default function ModalUpdatePassword({ visible, setVisible }) {\n  const ChildRef = useRef();\n  const closeModal = () => {\n    setVisible(false);\n    ChildRef.current.resetForm();\n  };\n  const [modalText, setModalText] = React.useState();\n\n  useEffect(() => {\n    setModalText(<UpdateForm setModalText={setModalText} ref={ChildRef} />);\n  }, []);\n\n  return (\n    <Modal\n      title=\"變更密碼\"\n      onCancel={closeModal}\n      afterClose={() => setUserErrorMessage(null)}\n      visible={visible}\n      footer={null}\n      closable\n    >\n      {modalText}\n    </Modal>\n  );\n}\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { Row, Col, Button, Input, message} from 'antd';\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n  selectUser,\n  getMe,\n  updateMyInfo,\n} from '../../../redux/reducers/userReducer';\nimport ModalUpdatePassword from './ModalUpdatePassword';\n\nconst PageWrapper = styled.div`\n  font-size: 20px;\n  text-align: center;\n  padding: 10px;\n`;\nconst InfoRow = styled(Row)`\n  margin: 30px auto;\n`;\nconst InfoTitle = styled(Col)`\n  text-align: right;\n`;\nconst InfoDetail = styled(Col)`\n  text-align: left;\n`;\nconst { Search } = Input;\n\nexport default function AccountSetting() {\n  const dispatch = useDispatch();\n  const user = useSelector(selectUser);\n\n  const handleClickUpdateNickname = (value) => {\n    if (value === user.nickname ){\n      message.warning({\n        content: '暱稱相同',\n        key: 'isUpdating',\n        duration: 5,\n      });\n      return\n    }\n    message.loading({\n      content: '變更暱稱中',\n      key: 'isUpdating',\n      duration: 0,\n    });\n\n    dispatch(updateMyInfo(value)).then((json) => {\n      if (json.ok === 1) {\n        message.success({\n          content: '變更暱稱成功',\n          key: 'isUpdating',\n          duration: 5,\n        });\n        return dispatch(getMe());\n      }\n      message.error({\n        content: json.errorMessage,\n        key: 'isUpdating',\n        duration: 5,\n      });\n      return \n    });\n  };\n  // 變更密碼 Modal\n  const [visible, setVisible] = useState(false);\n  const showModal = () => {\n    setVisible(true);\n  };\n\n  return (\n    <PageWrapper>\n      <InfoRow>\n        <InfoTitle span={10}>Email：</InfoTitle>\n        <InfoDetail span={12}>{user.email}</InfoDetail>\n      </InfoRow>\n      <InfoRow>\n        <InfoTitle span={10}>註冊時間：</InfoTitle>\n        <InfoDetail span={12}>\n          {new Date(user.createdAt).toLocaleString()}\n        </InfoDetail>\n      </InfoRow>\n      <InfoRow>\n        <InfoTitle span={10}>更新時間：</InfoTitle>\n        <InfoDetail span={12}>\n          {new Date(user.updatedAt).toLocaleString()}\n        </InfoDetail>\n      </InfoRow>\n      <InfoRow>\n        <InfoTitle span={10}>暱稱：</InfoTitle>\n        <InfoDetail span={8}>\n          <Search\n            defaultValue={user.nickname}\n            enterButton=\"變更暱稱\"\n            onSearch={handleClickUpdateNickname}\n          />\n        </InfoDetail>\n      </InfoRow>\n      <Button type=\"primary\" size=\"large\" danger onClick={showModal}>\n        變更密碼\n      </Button>\n      <ModalUpdatePassword visible={visible} setVisible={setVisible} />\n    </PageWrapper>\n  );\n}\n","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-unresolved */\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport { sendOrderAPI, getMyOrderListAPI } from \"../../webAPI/orderAPI\";\n\nexport const orderSlice = createSlice({\n  name: \"order\",\n  initialState: {\n    orderResponse: null,\n    isSendingOrder: false,\n    sendingOrderError: null,\n    orderList: null,\n  },\n  reducers: {\n    setOrderResponse: (state, action) => {\n      state.orderResponse = action.payload;\n    },\n    setIsSendingOrder: (state, action) => {\n      state.isSendingOrder = action.payload;\n    },\n    setSendingOrderError: (state, action) => {\n      state.sendingOrderError = action.payload;\n    },\n    setOrderList: (state, action) => {\n      state.orderList = action.payload;\n    },\n  },\n});\n\n// action\nexport const {\n  setOrderResponse,\n  setIsSendingOrder,\n  setSendingOrderError,\n  setOrderList,\n} = orderSlice.actions;\n\n// redux thunk function\nexport const sendOrder = (data) => (dispatch) => {\n  return sendOrderAPI(data)\n    .then((json) => {\n      return json\n    })\n    .catch((err) => {\n      console.log(\"err: \", err);\n    });\n};\n\nexport const getMyOrderList = () => (dispatch) => {\n  return getMyOrderListAPI().then((orderList) => {\n    if (orderList.ok === 0)\n      return dispatch(setSendingOrderError(orderList.errorMessage));\n    dispatch(setOrderList(orderList.data));\n  });\n};\n\n// selector\nexport const selectOrderResponse = (store) => store.order.orderResponse;\nexport const selectOrderList = (store) => store.order.orderList;\n\nexport default orderSlice.reducer;\n","import { BASE_URL } from '../constants/API_BASE_URL';\nimport { getAuthToken } from '../utils';\n\nexport const sendOrderAPI = (data) => {\n  return fetch(`${BASE_URL}/orders`, {\n    method: 'POST',\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify(data),\n  }).then((res) => res.json());\n};\n\nexport const getMyOrderListAPI = () => {\n  return fetch(`${BASE_URL}/orders/me`, {\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n  })\n    .then((res) => res.json())\n    .catch((error) => console.log(error));\n};\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Table } from 'antd';\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n  getMyOrderList,\n  selectOrderList,\n} from '../../../redux/reducers/orderReducer';\nimport { toCurrency } from '../../../utils';\n\nconst PageWrapper = styled.div`\n  padding: 24px;\n`\nconst EmptyOrderList = styled.div`\n  padding: 32px;\n  font-size: 28px;\n  text-align: center;\n`;\nconst CourseImg = styled.img`\n  max-width: 60px;\n`;\n\nexport default function AccountSetting() {\n  const dispatch = useDispatch();\n  const orderList = useSelector(selectOrderList);\n  useEffect(() => {\n    dispatch(getMyOrderList());\n  }, [dispatch]);\n\n  const columns = [\n    { title: '訂單編號', dataIndex: 'id', key: 'id' },\n    { title: '付款者姓名', dataIndex: 'name', key: 'name' },\n    { title: '付款方式', dataIndex: 'paymentType', key: 'paymentType' },\n    { title: '訂單總額', dataIndex: 'sumPrice', key: 'sumPrice' },\n    { title: '已付款', dataIndex: 'isPaid', key: 'isPaid' },\n    { title: '訂單成立時間', dataIndex: 'createdAt', key: 'createdAt' },\n  ];\n\n  const data = [];\n  if (orderList) {\n    for (let i = 0; i < orderList.length; ++i) {\n      data.push({\n        key: i,\n        id: orderList[i].id,\n        name: orderList[i].name,\n        paymentType: orderList[i].paymentType,\n        sumPrice: toCurrency(orderList[i].sumPrice),\n        isPaid: orderList[i].isPaid ? '是' : '否',\n        createdAt: new Date(orderList[i].createdAt).toLocaleString(),\n      });\n    }\n  }\n  const expandedRowRender = (row) => {\n    const columns = [\n      {\n        title: '',\n        dataIndex: 'imgUrl',\n        key: 'imgUrl',\n        render: (imgUrl) => <CourseImg src={imgUrl} />,\n      },\n      { title: '課程名稱', dataIndex: 'title', key: 'title' },\n      { title: '目前售價', dataIndex: 'price', key: 'price' },\n      { title: '實付金額', dataIndex: 'amountPaid', key: 'amountPaid' },\n    ];\n    const data = [];\n    const selectedOrderItems = orderList[row.key].Order_items;\n    for (let i = 0; i < selectedOrderItems.length; ++i) {\n      data.push({\n        key: i,\n        imgUrl: selectedOrderItems[i].Course.imgUrl,\n        title: selectedOrderItems[i].Course.title,\n        price: toCurrency(selectedOrderItems[i].Course.price),\n        amountPaid: toCurrency(selectedOrderItems[i].amountPaid),\n      });\n    }\n    return <Table columns={columns} dataSource={data} pagination={false} />;\n  };\n\n  return (\n    <>\n      {orderList ? (\n        <PageWrapper>\n          <Table\n            className=\"components-table-demo-nested\"\n            columns={columns}\n            expandable={{ expandedRowRender }}\n            dataSource={data}\n          />\n        </PageWrapper>\n      ) : (\n        <EmptyOrderList>目前沒有訂單記錄</EmptyOrderList>\n      )}\n    </>\n  );\n}\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport AccountSetting from \"../pages/MePage/AccountSetting/\";\nimport OrderHistory from \"../pages/MePage/OrderHistory/\";\n\nexport default function MeRoutes() {\n  return (\n    <Switch>\n      <Route exact path={`/me`}>\n        <div></div>\n      </Route>\n      <Route path={`/me/info`}>\n        <AccountSetting />\n      </Route>\n      <Route path={`/me/orders`}>\n        <OrderHistory />\n      </Route>\n    </Switch>\n  );\n}\n","import React, { useEffect } from 'react';\nimport MeRoutes from '../../routes/MeRoutes';\nimport styled from 'styled-components';\nimport { Link, useLocation, useHistory } from 'react-router-dom';\nimport { Layout, Menu } from 'antd';\nimport { UserOutlined, FileDoneOutlined } from '@ant-design/icons';\n\nconst { Sider } = Layout;\nconst FixedSider = styled(Sider)`\n  overflow: auto;\n  height: 100vh;\n  position: fixed;\n  left: 0;\n`;\nconst StyledMenu = styled(Menu)`\n  height: 100%;\n  border-right: 0;\n`;\nconst StyledMenuItem = styled(Menu.Item)`\n  font-size: 20px;\n`;\nconst IconWrapper = styled.div`\n  padding: 20px 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\nconst UseIcon = styled(UserOutlined)`\n  font-size: 80px;\n  border-radius: 50%;\n  padding: 16px;\n  border: 1px dotted black;\n`;\n\nexport default function MePage() {\n  const location = useLocation();\n  const history = useHistory();\n  useEffect(() => {\n    // 進入後台預設導向課程列表\n    if (location.pathname === '/me') {\n      history.push('/me/info');\n    }\n  }, [history, location.pathname]);\n\n  return (\n    <Layout>\n      <FixedSider>\n        <StyledMenu\n          mode=\"inline\"\n          defaultSelectedKeys={['1']}\n          defaultOpenKeys={['sub1']}\n        >\n          <IconWrapper>\n            <UseIcon />\n          </IconWrapper>\n          <StyledMenuItem\n            key=\"1\"\n            icon={<UserOutlined style={{ fontSize: 20 }} />}\n          >\n            <Link to=\"/me/info\">個人資料</Link>\n          </StyledMenuItem>\n          <StyledMenuItem\n            key=\"2\"\n            icon={<FileDoneOutlined style={{ fontSize: 20 }} />}\n          >\n            <Link to=\"/me/orders\">訂單紀錄</Link>\n          </StyledMenuItem>\n        </StyledMenu>\n      </FixedSider>\n      <Layout style={{ marginLeft: '200px' }}>\n        <MeRoutes />\n      </Layout>\n    </Layout>\n  );\n}\n","import React from 'react';\nimport { Spin } from 'antd';\nimport styled from 'styled-components';\n\nconst LoadingWrapper = styled.div`\n  position: fixed;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1;\n`;\n\nfunction Loading() {\n  return (\n    <LoadingWrapper>\n      <Spin size={'large'}/>\n    </LoadingWrapper>\n  );\n}\n\nexport default Loading;\n","import React, { useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Space, Table } from \"antd\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  getCourseList,\n  selectCourseList,\n  selectIsGettingCourse,\n} from \"../../redux/reducers/courseReducer\";\nimport Loading from \"../../components/Loading\";\nimport { toCurrency } from '../../utils'\n// import { dummyData as data } from \"./dummyData\";\n\nconst columns = [\n  {\n    title: \"Id\",\n    dataIndex: \"id\",\n    key: \"id\",\n  },\n  {\n    title: \"課程名稱\",\n    dataIndex: \"title\",\n    key: \"title\",\n    render: (text, record) => (\n      <Link to={`/courses/${record.id}`}>{text}</Link>\n    ),\n  },\n  {\n    title: \"目前售價\",\n    dataIndex: \"price\",\n    key: \"price\",\n  },\n  {\n    title: \"是否公開\",\n    dataIndex: \"isPublic\",\n    key: \"isPublic\",\n  },\n  {\n    title: \"更新於\",\n    dataIndex: \"updatedAt\",\n    key: \"updatedAt\",\n  },\n  {\n    title: \"Action\",\n    key: \"action\",\n    render: (text, record) => (\n      <Space size=\"middle\">\n        <Link to={`/classroom/${record.id}`}>預覽上課頁</Link>\n      </Space>\n    ),\n  },\n];\n\nexport default function CoursesTable() {\n  const dispatch = useDispatch();\n  const courses = useSelector(selectCourseList);\n  const isGettingCourseList = useSelector(selectIsGettingCourse);\n\n  useEffect(() => {\n    dispatch(getCourseList({getPublic: 'all'}));\n  }, [dispatch]);\n\n  return (\n    <>\n      {isGettingCourseList && <Loading />}\n      {!isGettingCourseList && (\n        <Table\n          columns={columns}\n          dataSource={\n            courses &&\n            courses.map((item) => ({\n              ...item,\n              key: item.id,\n              price: toCurrency(item.price),\n              isPublic: item.isPublic ? \"是\" : \"否\",\n              updatedAt: item.updatedAt.slice(0, 10),\n            }))\n          }\n        />\n      )}\n    </>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Layout, Breadcrumb } from \"antd\";\nimport CoursesTable from \"./CoursesTable.js\";\n\nconst { Content } = Layout;\nconst InfoHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nexport default function ConsoleCoursesPage() {\n  return (\n    <>\n      <InfoHeader>\n        <Breadcrumb style={{ margin: \"16px 0\" }}>\n          <Breadcrumb.Item>課程列表</Breadcrumb.Item>\n        </Breadcrumb>\n      </InfoHeader>\n      <Content>\n        <CoursesTable />\n      </Content>\n    </>\n  );\n}\n","import { BASE_URL } from '../constants/API_BASE_URL';\nimport { getAuthToken } from '../utils';\n\nexport const getMemberListAPI = () => {\n  return fetch(`${BASE_URL}/users`, {\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n  }).then((res) => res.json());\n};\n\nexport const getMemberAPI = (id) => {\n  return fetch(`${BASE_URL}/users/${id}`, {\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n      \"content-type\": \"application/json\",\n    },\n  }).then((res) => res.json());\n};\n\nexport const updateUserInfoAPI = (id, email, nickname, AuthTypeId) =>\n  fetch(`${BASE_URL}/users/${id}`, {\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n    method: 'PATCH',\n    body: JSON.stringify({\n      email,\n      nickname,\n      AuthTypeId,\n    }),\n  })\n    .then((res) => res.json())","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-unresolved */\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport {\n  getMemberListAPI,\n  getMemberAPI,\n  updateUserInfoAPI,\n} from \"../../webAPI/adminAPI\";\n\nexport const memberSlice = createSlice({\n  name: \"member\",\n  initialState: {\n    memberList: [],\n    member: null,\n    errorMessage: \"\",\n    isGettingMemberList: false,\n    isGettingMember: false,\n  },\n  reducers: {\n    setMemberList: (state, action) => {\n      state.memberList = action.payload;\n    },\n    setMember: (state, action) => {\n      state.member = action.payload;\n    },\n    setErrorMessage: (state, action) => {\n      state.errorMessage = action.payload;\n    },\n    setIsGettingMemberList: (state, action) => {\n      state.isGettingMemberList = action.payload;\n    },\n    setIsGettingMember: (state, action) => {\n      state.isGettingMember = action.payload;\n    },\n  },\n});\n\n// action\nexport const {\n  setMemberList,\n  setMember,\n  setErrorMessage,\n  setIsGettingMemberList,\n  setIsGettingMember,\n} = memberSlice.actions;\n\n// redux thunk function\n\nexport const getMemberList = () => (dispatch) => {\n  dispatch(setMemberList(null));\n  dispatch(setIsGettingMemberList(true));\n  dispatch(setErrorMessage(\"\"));\n\n  getMemberListAPI()\n    .then((res) => {\n      if (!res || res.ok === 0) {\n        dispatch(setErrorMessage(res ? res.errorMessage : \"something wrong\"));\n        dispatch(setIsGettingMemberList(false));\n        return;\n      }\n      // success\n      dispatch(setMemberList(res.data));\n      dispatch(setIsGettingMemberList(false));\n    })\n    .catch((err) => {\n      console.log(\"err: \", err);\n    });\n};\n\nexport const getMember = (id) => (dispatch) => {\n  dispatch(setMember(null));\n  dispatch(setIsGettingMember(true));\n  dispatch(setErrorMessage(\"\"));\n\n  getMemberAPI(id)\n    .then((res) => {\n      if (!res || res.ok === 0) {\n        dispatch(setErrorMessage(res ? res.errorMessage : \"something wrong\"));\n        dispatch(setIsGettingMember(false));\n        return;\n      }\n      // success\n      console.log(res.data)\n      dispatch(setMember(res.data));\n      dispatch(setIsGettingMember(false));\n    })\n    .catch((err) => {\n      console.log(\"err: \", err);\n    });\n};\n\nexport const updateMemberAuth = (id, authType) => (dispatch) => {\n  dispatch(setErrorMessage(\"\"));\n  updateUserInfoAPI(id, null, null, authType).then((res) => {\n    console.log(res);\n    if (res.ok === 0) return dispatch(setErrorMessage(res.errorMessage));\n  });\n};\n\n// selector\nexport const selectMember = (store) => store.member.member;\nexport const selectMemberList = (store) => store.member.memberList;\nexport const selectIsGettingMemberList = (store) =>\n  store.member.isGettingMemberList;\nexport const selectIsGettingMember = (store) => store.member.isGettingMember;\n\nexport default memberSlice.reducer;\n","import React, { useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  getMemberList,\n  selectMemberList,\n  selectIsGettingMemberList,\n} from \"../../redux/reducers/memberReducer\";\nimport { Space, Table } from \"antd\";\nimport Loading from \"../../components/Loading\";\nimport { translateAuth } from \"../../utils\";\n\nexport const columns = [\n  {\n    title: \"Id\",\n    dataIndex: \"id\",\n    key: \"id\",\n  },\n  {\n    title: \"信箱\",\n    dataIndex: \"email\",\n    key: \"email\",\n  },\n  {\n    title: \"會員身份\",\n    dataIndex: \"auth\",\n    key: \"auth\",\n  },\n  {\n    title: \"更新於\",\n    dataIndex: \"updatedAt\",\n    key: \"updatedAt\",\n  },\n  {\n    title: \"Action\",\n    key: \"action\",\n    render: (text, record) => (\n      <Space size=\"middle\">\n        <Link to={`/console/members/${record.id}`}>more</Link>\n      </Space>\n    ),\n  },\n];\n\nexport default function MembersTable() {\n  const dispatch = useDispatch();\n  const members = useSelector(selectMemberList);\n  const isGettingMemberList = useSelector(selectIsGettingMemberList);\n\n  useEffect(() => {\n    dispatch(getMemberList());\n    //return () => {};\n  }, [dispatch]);\n\n  return (\n    <>\n      {isGettingMemberList && <Loading />}\n      {!isGettingMemberList && (\n        <Table\n          columns={columns}\n          dataSource={\n            members &&\n            members.map((item) => ({\n              ...item,\n              key: item.id,\n              updatedAt: new Date(item.updatedAt).toLocaleString(),\n              auth: translateAuth(item.authTypeId),\n            }))\n          }\n        />\n      )}\n    </>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Layout, Breadcrumb } from \"antd\";\nimport MembersTable from \"./MembersTable.js\";\n\nconst { Content } = Layout;\nconst InfoHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\nconst TableContainer = styled(Content)`\n  background-color: ${(props) => props.theme.colors.white};\n`;\n\nexport default function ConsoleMembersPage() {\n  return (\n    <>\n      <InfoHeader>\n        <Breadcrumb style={{ margin: \"16px 0\" }}>\n          <Breadcrumb.Item>會員列表</Breadcrumb.Item>\n        </Breadcrumb>\n      </InfoHeader>\n      <TableContainer>\n        <MembersTable />\n      </TableContainer>\n    </>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { Link, useParams, useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  getMember,\n  selectMember,\n  updateMemberAuth,\n  selectIsGettingMember,\n} from '../../redux/reducers/memberReducer';\nimport styled from 'styled-components';\nimport {\n  Layout,\n  Breadcrumb,\n  Button,\n  Typography,\n  Divider,\n  Select,\n  Space,\n  Table,\n  Tag,\n  Descriptions,\n} from 'antd';\nimport Loading from '../../components/Loading';\nimport { translateAuth } from '../../utils';\n\nconst { Content } = Layout;\nconst { Option } = Select;\nconst { Title, Text } = Typography;\n\nconst InfoHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst MemberContent = styled(Content)`\n  padding: 24px;\n  background-color: ${(props) => props.theme.colors.white};\n`;\n\nconst columns = [\n  {\n    title: '課程 ID',\n    dataIndex: 'CourseId',\n    key: 'CourseId',\n    render: (text) => text,\n  },\n  {\n    title: '課程名稱',\n    key: 'Course',\n    dataIndex: 'Course',\n    render: (Course) => Course.CourseTitle,\n  },\n];\n\nconst AuthSelection = ({ selectedUserId, handleChange }) => {\n  const authTypeIdList = [1, 2, 3];\n  return (\n    <>\n      <Select\n        style={{ width: 120 }}\n        onChange={handleChange}\n        defaultValue={translateAuth(selectedUserId)}\n      >\n        {authTypeIdList.map((authTypeId) => (\n          <Option key={authTypeId} value={authTypeId}>\n            {translateAuth(authTypeId)}\n          </Option>\n        ))}\n      </Select>\n    </>\n  );\n};\n\nexport default function MemberDetailPage() {\n  const { id } = useParams();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [localAuthTypeId, setLocalAuthTypeId] = useState(0);\n  const member = useSelector(selectMember);\n  const isGettingMember = useSelector(selectIsGettingMember);\n\n  useEffect(() => {\n    dispatch(getMember(id));\n  }, [dispatch, id]);\n\n  function handleChange(value) {\n    setLocalAuthTypeId(value);\n  }\n\n  const handleSave = () => {\n    if (localAuthTypeId === 0 || localAuthTypeId === member.authTypeId) return;\n    dispatch(updateMemberAuth(id, localAuthTypeId));\n    history.push(`/console/members`); // 把頁面導向會員列表\n  };\n\n  return (\n    <>\n      {isGettingMember && <Loading />}\n      {!isGettingMember && member && (\n        <>\n          <InfoHeader>\n            <Breadcrumb style={{ margin: '16px 0' }}>\n              <Breadcrumb.Item>\n                <Link to=\"/console/members\">會員列表</Link>\n              </Breadcrumb.Item>\n              <Breadcrumb.Item>會員資料 (ID: {member.id})</Breadcrumb.Item>\n            </Breadcrumb>\n            <Space size=\"large\">\n              <AuthSelection\n                handleChange={handleChange}\n                selectedUserId={member.authTypeId}\n              />\n              <Button type=\"primary\" onClick={handleSave}>\n                變更身分\n              </Button>\n            </Space>\n          </InfoHeader>\n          <MemberContent>\n            <Descriptions title=\"會員資料\" bordered>\n              <Descriptions.Item label=\"會員 ID\">{member.id}</Descriptions.Item>\n              <Descriptions.Item label=\"目前身份\" span={2}>\n                {translateAuth(member.authTypeId)}\n              </Descriptions.Item>\n              <Descriptions.Item label=\"會員信箱\">\n                {member.email}\n              </Descriptions.Item>\n              <Descriptions.Item label=\"會員暱稱\" span={2}>\n                {member.nickname}\n              </Descriptions.Item>\n              <Descriptions.Item label=\"註冊日期\">\n                {new Date(member.createdAt).toLocaleString()}\n              </Descriptions.Item>\n              <Descriptions.Item label=\"更新日期\" span={2}>\n                {new Date(member.updatedAt).toLocaleString()}\n              </Descriptions.Item>\n              <Descriptions.Item label=\"購買課程清單\" span={3}>\n                {member.courseList.length > 0 ? (\n                  <Table\n                    columns={columns}\n                    dataSource={member.courseList.map((item) => ({\n                      ...item,\n                      key: item.CourseId,\n                    }))}\n                  />\n                ): (\n                  <div>尚未購買任何課程</div>\n                )}\n              </Descriptions.Item>\n            </Descriptions>\n          </MemberContent>\n        </>\n      )}\n    </>\n  );\n}\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport ConsoleCoursesPage from \"../pages/ConsoleCoursesPage\";\nimport ConsoleMembersPage from \"../pages//ConsoleMembersPage\";\nimport MemberDetailPage from \"../pages//MemberDetailPage\";\n\nexport default function ConsoleRoutes() {\n  return (\n    <Switch>\n      <Route exact path=\"/console/courses\">\n        <ConsoleCoursesPage />\n      </Route>\n      <Route exact path=\"/console/members\">\n        <ConsoleMembersPage />\n      </Route>\n      <Route exact path=\"/console/members/:id\">\n        <MemberDetailPage />\n      </Route>\n    </Switch>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { Link, useLocation, useHistory } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { Layout, Menu, Breadcrumb, Button } from 'antd';\nimport { BookOutlined, ContactsOutlined } from '@ant-design/icons';\nimport ConsoleRoutes from '../../routes/ConsoleRoutes';\n\nconst { Sider } = Layout;\nconst FixedSider = styled(Sider)`\n  overflow: auto;\n  height: 100vh;\n  position: fixed;\n  left: 0;\n`\nconst StyledMenu = styled(Menu)`\n  height: 100%;\n  border-right: 0;\n`;\nconst StyledMenuItem = styled(Menu.Item)`\n  font-size: 20px;\n`;\n\nexport default function ConsolePage() {\n  const location = useLocation();\n  const history = useHistory();\n  useEffect(() => {\n    // 進入後台預設導向課程列表\n    if (location.pathname === '/console') {\n      history.push('/console/courses');\n    }\n  }, [history, location.pathname]);\n\n  return (\n    <Layout>\n      <FixedSider>\n        <StyledMenu\n          mode=\"inline\"\n          defaultSelectedKeys={['1']}\n          defaultOpenKeys={['sub1']}\n        >\n          <StyledMenuItem key=\"1\" icon={<BookOutlined style={{fontSize: 20}}/>}>\n            <Link to=\"/console/courses\">課程列表</Link>\n          </StyledMenuItem>\n          <StyledMenuItem key=\"2\" icon={<ContactsOutlined style={{fontSize: 20}}/>}>\n            <Link to=\"/console/members\">會員列表</Link>\n          </StyledMenuItem>\n        </StyledMenu>\n      </FixedSider>\n      <Layout style={{ padding: '0 24px', marginLeft: '200px' }}>\n        <ConsoleRoutes />\n      </Layout>\n    </Layout>\n  );\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport {\n  selectCartList,\n  deleteCartItem,\n} from '../../redux/reducers/cartReducer';\nimport { Table, Button } from 'antd';\nimport { DeleteOutlined } from '@ant-design/icons';\nimport { toCurrency } from '../../utils';\nimport {\n  MEDIA_QUERY_MOBILE_M,\n  MEDIA_QUERY_TABLET,\n} from '../../constants/breakpoint';\n\nconst PageWrapper = styled.div`\n  padding: ${(props) => props.padding}px;\n  ${MEDIA_QUERY_MOBILE_M} {\n    display: block;\n    position: static;\n  }\n  ${MEDIA_QUERY_TABLET} {\n    display: flex;\n    position: relative;\n  }\n`;\nconst LeftContainer = styled.div`\n  ${MEDIA_QUERY_TABLET} {\n    flex: 1 1 0%;\n  }\n`;\nconst RightContainerOuter = styled.div`\n  ${MEDIA_QUERY_TABLET} {\n    flex: 0 1 350px;\n    margin-left: 30px;\n  }\n`;\nconst RightContainerInner = styled.div`\n  padding: 24px 12px;\n  background: ${(props) => props.theme.colors.secondary.light};\n  ${MEDIA_QUERY_TABLET} {\n    width: 350px;\n    position: fixed;\n    right: 30px;\n  }\n`;\n\nexport default function CartListPage({ padding }) {\n  const dispatch = useDispatch();\n  const cartList = useSelector(selectCartList);\n  let sumPrice = 0;\n  if (cartList.length > 0) {\n    cartList.forEach((el) => {\n      sumPrice += el.Course.price;\n    });\n  }\n\n  const handleDeleteCartItem = (id) => {\n    dispatch(deleteCartItem(id));\n  };\n\n  // 加入 react 需要的 key\n  let data = [];\n  for (let i = 0; i < cartList.length; i += 1) {\n    data.push({\n      key: cartList[i].CourseId,\n      id: cartList[i].CourseId,\n      title: cartList[i].Course.title,\n      price: toCurrency(cartList[i].Course.price),\n    });\n  }\n\n  const columns = [\n    { title: '課程ID', dataIndex: ['id'], key: 'id' },\n    {\n      title: '課程名稱',\n      dataIndex: ['title'],\n      key: 'title',\n      render: (text, record) => (\n        <Link to={`courseInfo/${record.id}`}>{text}</Link>\n      ),\n    },\n    { title: '售價', dataIndex: ['price'], key: 'price' },\n    {\n      title: '動作',\n      dataIndex: '',\n      key: 'x',\n      render: (data) => (\n        <>\n          <Button>\n            <Link to={`/checkout/${data.id}`}>購買單堂</Link>\n          </Button>{' '}\n          <Button\n            danger\n            icon={<DeleteOutlined />}\n            onClick={() => handleDeleteCartItem(data.id)}\n          >\n            刪除\n          </Button>\n        </>\n      ),\n    },\n  ];\n\n  return (\n    <PageWrapper padding={padding}>\n      <LeftContainer>\n        {cartList.length === 0 && (\n          <center>\n            <h1>購物車是空的，看看課程？</h1>\n            <h1>\n              <Link to=\"/\">探索課程</Link>\n            </h1>\n          </center>\n        )}\n        {cartList.length > 0 && (\n          <>\n            <h1>購物車清單</h1>\n            <h3>共有{cartList.length}堂課</h3>\n            <hr />\n            <Table\n              columns={columns}\n              dataSource={data}\n              pagination={{ pageSize: 5 }}\n            />\n          </>\n        )}\n      </LeftContainer>\n      <RightContainerOuter>\n        <RightContainerInner>\n          <h1>\n            <strong>購物車明細</strong>\n          </h1>\n          <hr />\n          <h2 align=\"right\">小計 {toCurrency(sumPrice)}</h2>\n          <br></br>\n          {cartList.length > 0 && (\n            <Button size=\"large\" block>\n              <Link to={`/checkout`}>前往結帳</Link>\n            </Button>\n          )}\n        </RightContainerInner>\n      </RightContainerOuter>\n    </PageWrapper>\n  );\n}\n","import React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useParams, useHistory } from 'react-router-dom';\nimport { selectCartList } from '../../redux/reducers/cartReducer';\nimport {\n  selectCourse,\n  getCourse,\n  setCourse,\n} from '../../redux/reducers/courseReducer';\nimport { sendOrder } from '../../redux/reducers/orderReducer';\nimport { getMe } from '../../redux/reducers/userReducer';\nimport {\n  Typography,\n  Table,\n  Button,\n  Form,\n  Input,\n  Select,\n  message,\n} from 'antd';\nimport { toCurrency } from '../../utils';\nimport {\n  MEDIA_QUERY_MOBILE_M,\n  MEDIA_QUERY_TABLET,\n} from '../../constants/breakpoint';\n\nconst { Title, Paragraph } = Typography;\nconst PageWrapper = styled.div`\n  padding: ${(props) => props.padding}px;\n  ${MEDIA_QUERY_MOBILE_M} {\n    display: block;\n    position: static;\n  }\n  ${MEDIA_QUERY_TABLET} {\n    display: flex;\n    position: relative;\n  }\n`;\nconst FormWrapper = styled.div`\n  ${MEDIA_QUERY_MOBILE_M} {\n    display: block;\n    position: static;\n  }\n  ${MEDIA_QUERY_TABLET} {\n    display: flex;\n    position: relative;\n  }\n`;\nconst LeftContainer = styled.div`\n  ${MEDIA_QUERY_TABLET} {\n    flex: 1 1 0%;\n  }\n`;\nconst RightContainerOuter = styled.div`\n  ${MEDIA_QUERY_TABLET} {\n    flex: 0 1 350px;\n    margin-left: 30px;\n  }\n`;\nconst RightContainerInner = styled.div`\n  padding: 24px 12px;\n  background: ${(props) => props.theme.colors.secondary.light};\n  ${MEDIA_QUERY_TABLET} {\n    width: 350px;\n    position: fixed;\n    right: 30px;\n  }\n`;\n\nconst { Option } = Select;\nconst formLayout = 'vertical';\n\nconst formItemLayout = {\n  labelCol: {\n    span: 24,\n  },\n  wrapperCol: {\n    span: 12,\n  },\n};\nconst buttonItemLayout = {\n  wrapperCol: {\n    span: 0,\n    offset: 0,\n  },\n};\nconst validateMessages = {\n  required: '${label} is required',\n};\n\nexport default function CheckoutPage({ padding }) {\n  const { id } = useParams();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const cartList = useSelector(selectCartList);\n  const course = useSelector(selectCourse);\n  const [form] = Form.useForm();\n  let sumPrice = 0;\n  let sumCourse = 0;\n  let data = [];\n\n  useEffect(() => {\n    if (id) {\n      dispatch(getCourse(id));\n      // unmount 時先 clean up 避免下次回來時因為仍有舊資料而短暫顯示\n      return () => {\n        dispatch(setCourse(null));\n      };\n    }\n  }, [dispatch, id]);\n\n  // params 有帶 id => 單堂結帳\n  if (id && course) {\n    data.push({\n      key: course.id,\n      id: course.id,\n      title: course.title,\n      price: course.price,\n      priceString: toCurrency(course.price),\n    });\n    sumPrice = course.price;\n    sumCourse = 1;\n  } else if (!id && cartList.length > 0) {\n    // 多堂結帳\n    for (let i = 0; i < cartList.length; i += 1) {\n      data.push({\n        key: cartList[i].CourseId,\n        id: cartList[i].CourseId,\n        title: cartList[i].Course.title,\n        price: cartList[i].Course.price,\n        priceString: toCurrency(cartList[i].Course.price),\n      });\n      sumCourse += 1;\n    }\n    cartList.forEach((el) => {\n      sumPrice += el.Course.price;\n    });\n  }\n\n  const columns = [\n    { title: '課程ID', dataIndex: ['id'], key: 'id' },\n    {\n      title: '課程名稱',\n      dataIndex: ['title'],\n      key: 'title',\n      render: (text, record) => (\n        <Link to={`/courseInfo/${record.id}`}>{text}</Link>\n      ),\n    },\n    { title: '售價', dataIndex: ['priceString'], key: 'priceString' },\n  ];\n\n  const onFinish = (values) => {\n    message.loading({\n      content: '付款中',\n      key: 'isChecking',\n      duration: 0,\n    });\n    const orderData = {\n      ...values,\n      sumPrice: sumPrice,\n      orderCourses: data.map((el) => {\n        return {\n          CourseId: el.id,\n          amountPaid: el.price,\n        };\n      }),\n    };\n    dispatch(sendOrder(orderData)).then((json) => {\n      if (json.ok === 1) {\n        message.success({\n          content: json.message,\n          key: 'isChecking',\n          duration: 5,\n        });\n        dispatch(getMe());\n        return history.push('/my-course');\n      }\n      message.error({\n        content: json.errorMessage,\n        key: 'isChecking',\n        duration: 5,\n      });\n    });\n  };\n  const onReset = () => {\n    form.resetFields();\n  };\n\n  return (\n    <PageWrapper padding={padding}>\n      <Form\n        {...formItemLayout}\n        layout={formLayout}\n        form={form}\n        onFinish={onFinish}\n        validateMessages={validateMessages}\n        style={{ width: '100%' }}\n      >\n        <FormWrapper>\n          <LeftContainer>\n            {sumPrice === 0 ? (\n              <>\n                <Title>歡迎加入免費課程</Title>\n                <Paragraph>\n                  您選擇的課程皆為免費課程，點擊「確認加入」後就可以開始上課囉！\n                </Paragraph>\n              </>\n            ) : (\n              <>\n                <Title level={3}>付款資訊</Title>\n                <hr/>\n                <Form.Item\n                  name=\"name\"\n                  label=\"姓名\"\n                  rules={[{ required: true }]}\n                >\n                  <Input />\n                </Form.Item>\n                <Form.Item\n                  name=\"paymentType\"\n                  label=\"付款方式\"\n                  rules={[{ required: true }]}\n                >\n                  <Select placeholder=\"請選擇付款方式\" allowClear>\n                    <Option value=\"信用卡\">信用卡</Option>\n                    <Option value=\"LINE Pay\">LINE Pay</Option>\n                  </Select>\n                </Form.Item>\n              </>\n            )}\n\n            {((!id && cartList.length > 0) || course) && (\n              <>\n                <Title level={3}>購買清單 </Title>\n                <h3>共有{sumCourse}堂課</h3>\n                <hr />\n                <Table\n                  columns={columns}\n                  dataSource={data}\n                  style={{ fontSize: '18px' }}\n                  pagination={{ pageSize: 5 }}\n                />\n              </>\n            )}\n          </LeftContainer>\n          <RightContainerOuter>\n            <RightContainerInner>\n              <Title level={3}>訂單明細</Title>\n              <hr />\n              <h2 align=\"right\">小計 {toCurrency(sumPrice)}</h2>\n              <Form.Item {...buttonItemLayout}>\n                <Button type=\"primary\" size=\"large\" htmlType=\"submit\" block>\n                  {sumPrice === 0 ? '確認加入' : '確認付款'}\n                </Button>\n              </Form.Item>\n              {sumPrice > 0 && (\n                <Form.Item {...buttonItemLayout}>\n                  <Button\n                    htmlType=\"button\"\n                    size=\"large\"\n                    onClick={onReset}\n                    block\n                  >\n                    清除資料\n                  </Button>\n                </Form.Item>\n              )}\n            </RightContainerInner>\n          </RightContainerOuter>\n        </FormWrapper>\n      </Form>\n    </PageWrapper>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Row, Col, Select, Typography } from 'antd';\nimport CourseCard from '../../components/CourseCard';\nimport Loading from '../../components/Loading';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport {\n  selectCourseList,\n  selectIsGettingCourse,\n  getCourseList,\n  setCourseList,\n} from '../../redux/reducers/courseReducer';\n\nconst { Title } = Typography;\nconst { Option } = Select;\nconst PageWrapper = styled.div`\n  padding: ${(props) => props.padding}px;\n`;\n\nconst SearchWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n`;\nconst SearchInfo = styled.div`\n  font-size: 20px;\n`;\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nexport default function CourseListPage({ padding }) {\n  const dispatch = useDispatch();\n  const query = useQuery();\n  const keyword = query.get('keyword') || '';\n  const courseList = useSelector(selectCourseList);\n  const isGettingCourseList = useSelector(selectIsGettingCourse);\n  const [selected, setSelected] = useState('latest')\n\n  // component mount 時執行(初始化)\n  useEffect(() => {\n    dispatch(getCourseList({ keyword, order: 'DESC' }));\n    // unmount 時先 clean up 避免下次回來時因為仍有舊資料而短暫顯示\n    return () => {\n      setSelected('latest')\n      dispatch(setCourseList([]));\n    };\n  }, [dispatch, keyword]);\n\n  const handleSelectChange = (value) => {\n    if (isGettingCourseList) return;\n    setSelected(value)\n    switch (value) {\n      case 'latest':\n        return dispatch(getCourseList({ keyword, sort: 'id', order: 'DESC' }));\n      case 'highPrice':\n        return dispatch(\n          getCourseList({ keyword, sort: 'price', order: 'DESC' })\n        );\n      case 'lowPrice':\n        return dispatch(\n          getCourseList({ keyword, sort: 'price', order: 'ASC' })\n        );\n      default:\n        return;\n    }\n  };\n\n  return (\n    <>\n      <PageWrapper padding={padding}>\n        <SearchWrapper>\n          <SearchInfo>\n            {keyword && <span>關鍵字:<strong>「{keyword}」, </strong></span>}\n            <span>共有 {courseList.length} 堂課程</span>\n          </SearchInfo>\n          <div>\n            排序方式：\n            <Select\n              value={selected}\n              style={{ width: 180 }}\n              onChange={handleSelectChange}\n            >\n              <Option value=\"latest\">最新上架(預設)</Option>\n              <Option value=\"highPrice\">價格高 → 低</Option>\n              <Option value=\"lowPrice\">價格低 → 高</Option>\n            </Select>\n          </div>\n        </SearchWrapper>\n        {isGettingCourseList && <Loading />}\n        {!isGettingCourseList && courseList.length === 0 ? (\n          <Title level={3}>\n            <center>查無課程</center>\n          </Title>\n        ) : (\n          <Row gutter={[{ xs: 16, sm: 20, md: 24, lg: 32 }, 36]}>\n            {courseList\n              .filter((course) => course.isPublic)\n              .map((course) => (\n                <Col key={course.id} xs={12} md={8} lg={6}>\n                  <CourseCard course={course} />\n                </Col>\n              ))}\n          </Row>\n        )}\n      </PageWrapper>\n    </>\n  );\n}\n","import React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Row, Col } from 'antd';\nimport CourseCard from '../../components/CourseCard';\nimport Loading from '../../components/Loading';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport {\n  selectIsGettingCourse,\n  selectMyCourseList,\n  getMyCourseList,\n  setMyCourseList,\n} from '../../redux/reducers/courseReducer';\n\nconst PageWrapper = styled.div`\n  padding: ${(props) => props.padding}px;\n`;\n\nexport default function MyCourseListPage({ padding }) {\n  const myCourseList = useSelector(selectMyCourseList);\n  const isGettingCourse = useSelector(selectIsGettingCourse);\n  const dispatch = useDispatch();\n  // component mount 時執行(初始化)\n  useEffect(() => {\n    dispatch(getMyCourseList());\n    // unmount 時先 clean up 避免下次回來時因為仍有舊資料而短暫顯示\n    return () => {\n      dispatch(setMyCourseList(null));\n    };\n  }, [dispatch]);\n\n  return (\n    <PageWrapper padding={padding}>\n      {isGettingCourse && <Loading />}\n      {!isGettingCourse && (\n        <>\n          {!myCourseList && (\n            <center>\n              <h1>我的課程是空的，看看課程？</h1>\n              <h1>\n                <Link to=\"/\">探索課程</Link>\n              </h1>\n            </center>\n          )}\n          {myCourseList && myCourseList.length > 0 && (\n            <Row gutter={[{ xs: 16, sm: 20, md: 24, lg: 32 }, 36]}>\n              {myCourseList.map((course) => (\n                <Col key={course.id} xs={12} md={8} lg={6}>\n                  <CourseCard course={course} isBought={true}/>\n                </Col>\n              ))}\n            </Row>\n          )}\n        </>\n      )}\n    </PageWrapper>\n  );\n}\n","import React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Button, Avatar, List, Typography } from 'antd';\nimport { useHistory, useParams, Link } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  getCourse,\n  selectCourse,\n  selectIsGettingCourse,\n} from '../../redux/reducers/courseReducer';\nimport { toCurrency } from '../../utils';\nimport Loading from '../../components/Loading';\nimport { selectCartList, addCartItem } from '../../redux/reducers/cartReducer';\nimport { selectUser } from '../../redux/reducers/userReducer';\n\nconst CourseWrapper = styled.div`\n  max-width: 760px;\n  margin: 24px auto;\n  padding: 32px;\n  background: ${(props) => props.theme.colors.white};\n  color: ${(props) => props.theme.colors.primary.text};\n  box-shadow: \n    1px 1px 1px rgba(0,0,0,0.15), \n    2px 2px 2px rgba(0,0,0,0.15), \n    4px 4px 4px rgba(0,0,0,0.15), \n    8px 8px 8px rgba(0,0,0,0.15);\n`;\nconst CourseTitle = styled.div`\n  text-align: center;\n  font-size: 42px;\n  font-weight: bold;\n`;\nconst Price = styled.div`\n  color: ${(props) => props.theme.colors.primary.main};\n  text-align: right;\n  font-size: 36px;\n  font-weight: bold;\n`;\nconst ButtonPlacer = styled.div`\n  display: flex;\n  justify-content: flex-end;\n`;\nconst ButtonWrapper = styled.div`\n  width: 200px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 90px;\n`;\n\nexport default function CourseInfoPage() {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const user = useSelector(selectUser);\n  const course = useSelector(selectCourse);\n  const cartList = useSelector(selectCartList);\n  const isGettingCourse = useSelector(selectIsGettingCourse);\n  const { id } = useParams();\n  const checkIsAlreadyInCart = () => {\n    for (let i = 0; i < cartList.length; i += 1) {\n      if (cartList[i].CourseId === Number(id)) {\n        // 當前課程已在 cartList 內\n        return true;\n      }\n    }\n    return false;\n  };\n\n  const handleClickAddToCart = () => {\n    if (!user) {\n      history.push('/cart');\n    }\n    if (!checkIsAlreadyInCart()) {\n      dispatch(addCartItem(course.id));\n    }\n  };\n  // component mount 時執行(初始化)\n  useEffect(() => {\n    dispatch(getCourse(id));\n    // unmount 時先 clean up 避免下次回來時因為仍有舊資料而短暫顯示\n    //return () => {};\n  }, [dispatch, id]);\n\n  return (\n    <>\n      {isGettingCourse && <Loading />}\n      {!isGettingCourse && !course && (\n        <center>\n          <h1>\n            <strong>無此課程或此課程未公開</strong>\n          </h1>\n        </center>\n      )}\n      {!isGettingCourse && course && (\n        <CourseWrapper>\n          <CourseTitle>{course.title}</CourseTitle>\n          <Price align=\"right\">{toCurrency(course.price)}</Price>\n\n          <ButtonPlacer>\n            {course.isPublic ? (\n              <ButtonWrapper>\n                {user && user.boughtCourses.indexOf(Number(id)) >= 0 ? (\n                  <Button type=\"primary\" size=\"large\" block>\n                    <Link to={`/classroom/${course.id}`}>開始上課</Link>\n                  </Button>\n                ) : (\n                  <>\n                    <Button type=\"primary\" size=\"large\" block>\n                      <Link to={`/checkout/${course.id}`}>立即購買</Link>\n                    </Button>\n                    {checkIsAlreadyInCart() ? (\n                      <Button type=\"primary\" size=\"large\" block danger>\n                        <Link to=\"/cart\">前進購物車</Link>\n                      </Button>\n                    ) : (\n                      <Button\n                        type=\"primary\"\n                        size=\"large\"\n                        onClick={handleClickAddToCart}\n                      >\n                        加入購物車\n                      </Button>\n                    )}\n                  </>\n                )}\n              </ButtonWrapper>\n            ) : (\n              <Button size=\"large\" disabled>\n                非公開課程\n              </Button>\n            )}\n          </ButtonPlacer>\n\n          <div>\n            <Link to={`/teacher-info/${course.Teacher.id}`}>\n              <Avatar size={64} src={course.Teacher.avatarUrl} />\n            </Link>\n          </div>\n          <br />\n          <p>\n            <strong>開課老師：</strong>\n            <div>{course.Teacher.name}</div>\n          </p>\n\n          <div>\n            <strong>課程介紹：</strong>\n          </div>\n          <br />\n          <p>{course.description}</p>\n          <div>\n            <strong>課程大綱：</strong>\n          </div>\n          <br />\n          {course.unit_title && (\n            <List\n              size=\"large\"\n              bordered\n              dataSource={course.unit_title.map((el, i) => {\n                return { number: i + 1, title: el };\n              })}\n              renderItem={(item) => (\n                <List.Item>\n                  <strong>{item.number}</strong>. {item.title}\n                </List.Item>\n              )}\n            />\n          )}\n        </CourseWrapper>\n      )}\n    </>\n  );\n}\n","import { BASE_URL } from '../constants/API_BASE_URL';\nimport { getAuthToken } from '../utils';\n\nexport const getTeacherListAPI = () =>\n  fetch(`${BASE_URL}/teachers`, {\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n  }).then((res) => res.json());\n\nexport const getTeacherAPI = (id) =>\n  fetch(`${BASE_URL}/teachers/${id}`, {\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n    },\n  }).then((res) => res.json());\n\nexport const applyTeacherAPI = ({ name, description, avatarUrl }) =>\n  fetch(`${BASE_URL}/teachers`, {\n    method: 'POST',\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify({\n      name,\n      description,\n      avatarUrl,\n    }),\n  }).then((res) => res.json());\n\n  export const updateTeacherInfoAPI = ({ name, description, avatarUrl }) =>\n  fetch(`${BASE_URL}/teachers`, {\n    method: 'PATCH',\n    headers: {\n      Authorization: `Bearer ${getAuthToken()}`,\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify({\n      name,\n      description,\n      avatarUrl,\n    }),\n  }).then((res) => res.json());\n\n","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-unresolved */\nimport { createSlice } from '@reduxjs/toolkit';\nimport {\n  getTeacherListAPI,\n  getTeacherAPI,\n  applyTeacherAPI,\n  updateTeacherInfoAPI\n} from '../../webAPI/teacherAPI';\n\nexport const teacherSlice = createSlice({\n  name: 'teacher',\n  initialState: {\n    teacherList: [],\n    isGettingTeacherList: false,\n    getTeacherListError: null,\n    teacher: null,\n    isGettingTeacher: false,\n    getTeacherError: null,\n  },\n  reducers: {\n    setTeacherList: (state, action) => {\n      state.teacherList = action.payload;\n      state.getTeacherListError = null;\n    },\n    setIsGettingTeacherList: (state, action) => {\n      state.isGettingTeacherList = action.payload;\n    },\n    setGetTeacherListError: (state, action) => {\n      state.getTeacherListError = action.payload;\n    },\n    setTeacher: (state, action) => {\n      state.teacher = action.payload;\n      state.getTeacherError = null;\n    },\n    setIsGettingTeacher: (state, action) => {\n      state.isGettingTeacher = action.payload;\n    },\n    setGetTeacherError: (state, action) => {\n      state.getTeacherError = action.payload;\n    },\n  },\n});\n\n// action\nexport const {\n  setTeacherList,\n  setIsGettingTeacherList,\n  setGetTeacherListError,\n  setTeacher,\n  setIsGettingTeacher,\n  setGetTeacherError,\n} = teacherSlice.actions;\n\n// redux thunk function\nexport const getTeacherList = () => (dispatch) => {\n  dispatch(setIsGettingTeacherList(true));\n  getTeacherListAPI()\n    .then((json) => {\n      if (json.ok === 0) {\n        dispatch(setGetTeacherListError(json.errorMessage));\n        dispatch(setIsGettingTeacherList(false));\n        return;\n      }\n      // success\n      dispatch(setTeacherList(json.data.teacherList));\n      dispatch(setIsGettingTeacherList(false));\n    })\n    .catch((err) => {\n      console.log('err: ', err);\n    });\n};\nexport const getTeacher = (id) => (dispatch) => {\n  dispatch(setIsGettingTeacher(true));\n  getTeacherAPI(id)\n    .then((json) => {\n      if (json.ok === 0) {\n        dispatch(setGetTeacherError(json.errorMessage));\n        dispatch(setIsGettingTeacher(false));\n        return;\n      }\n      // success\n      dispatch(setTeacher(json.data.teacher));\n      dispatch(setIsGettingTeacher(false));\n    })\n    .catch((err) => {\n      console.log('err: ', err);\n    });\n};\nexport const applyTeacher = ({name, description, avatarUrl}) => (dispatch) => {\n  console.log(name)\n  dispatch(setIsGettingTeacher(true));\n  return applyTeacherAPI({name, description, avatarUrl})\n    .then((json) => {\n      return json;\n    })\n    .catch((err) => {\n      console.log('err: ', err);\n    });\n};\nexport const updateTeacherInfo = ({name, description, avatarUrl}) => (dispatch) => {\n  return updateTeacherInfoAPI({name, description, avatarUrl})\n  .then((json) => {\n    return json;\n  })\n  .catch((err) => {\n    console.log('err: ', err);\n  });\n};\n\n// selector\nexport const selectTeacherList = (store) => store.teacher.teacherList;\nexport const selectIsGettingTeacherList = (store) =>\n  store.teacher.isGettingTeacherList;\nexport const selectTeacher = (store) => store.teacher.teacher;\nexport const selectIsGettingTeacher = (store) => store.teacher.isGettingTeacher;\n\nexport default teacherSlice.reducer;\n","import React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Avatar, Row, Col } from 'antd';\nimport { useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  getTeacher,\n  selectTeacher,\n  selectIsGettingTeacher,\n} from '../../redux/reducers/teacherReducer';\nimport CourseCard from '../../components/CourseCard';\nimport Loading from '../../components/Loading';\n\nconst TeacherWrapper = styled.div`\n  padding: 16px;\n  max-width: 760px;\n  margin: 24px auto;\n  background: ${(props) => props.theme.colors.white};\n  color: ${(props) => props.theme.colors.primary.text};\n`;\nconst TeacherTitle = styled.div`\n  text-align: center;\n  font-size: 42px;\n  font-weight: bold;\n`;\n\nexport default function TeacherInfoPage() {\n  const dispatch = useDispatch();\n  const teacher = useSelector(selectTeacher);\n  const isGettingTeacher = useSelector(selectIsGettingTeacher);\n  const { id } = useParams();\n\n  // component mount 時執行(初始化)\n  useEffect(() => {\n    dispatch(getTeacher(id));\n    // unmount 時先 clean up 避免下次回來時因為仍有舊資料而短暫顯示\n    return () => {};\n  }, [dispatch, id]);\n\n  return (\n    <>\n      {isGettingTeacher && <Loading />}\n      {!isGettingTeacher && teacher && (\n        <TeacherWrapper>\n          <TeacherTitle>{teacher.name}</TeacherTitle>\n          <center>\n            <Avatar size={120} src={teacher.avatarUrl} />\n          </center>\n          <h1><strong>關於我</strong></h1>\n          <h3>{teacher.description}</h3>\n          <br/>\n          <h1><strong>{teacher.name} 開的課：</strong></h1>\n          <br/>\n          <Row gutter={[16, { xs: 8, sm: 16, md: 24, lg: 32 }]}>\n            {teacher.Courses.filter((course) => course.isPublic).map(\n              (course) => (\n                <Col key={course.id} xs={12} md={8}>\n                  <CourseCard course={course} />\n                </Col>\n              )\n            )}\n          </Row>\n        </TeacherWrapper>\n      )}\n    </>\n  );\n}\n","import React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Breadcrumb } from 'antd';\nimport { useParams, Link, Switch, Route } from 'react-router-dom';\nimport Youtube from 'react-youtube';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Loading from '../../components/Loading';\nimport {\n  selectUnit,\n  getUnitByUnitId,\n} from '../../redux/reducers/courseReducer';\n\nconst UnitTitle = styled.div`\n  font-weight: bold;\n  font-size: 34px;\n  padding: 12px 0;\n`;\nconst UnitDescription = styled.div`\n  font-size: 16px;\n  margin: 20px auto;\n`;\nconst UnitVideo = styled(Youtube)`\n  width: 100%;\n  height: 500px;\n  margin: 0 auto;\n  justify-content: center;\n  align-items: center;\n`;\n\nexport default function UnitPage() {\n  const dispatch = useDispatch();\n  const unit = useSelector(selectUnit);\n  const { id, unitId } = useParams();\n\n  useEffect(() => {\n    dispatch(getUnitByUnitId(id, unitId));\n  }, [dispatch, id, unitId]);\n\n  const options = {\n    width: '80%',\n    alignItems: 'center',\n    justifyContent: 'center',\n    playerVars: {\n      autoplay: 1,\n    },\n  };\n  const getYoutubeId = (url) => {\n    const urlParams = new URLSearchParams(new URL(url).search);\n    return urlParams.get('v');\n  };\n  return (\n    <>\n      {unit ? (\n        <>\n          <Breadcrumb>\n          <Breadcrumb.Item>\n                <Link to={`/classroom/${unit.courseId}`}>{unit.courseTitle}</Link>\n              </Breadcrumb.Item>\n            <Breadcrumb.Item>{unit.title}</Breadcrumb.Item>\n          </Breadcrumb>\n          <UnitTitle>{unit.title}</UnitTitle>\n          <UnitDescription>{unit.description}</UnitDescription>\n          {unit.videoUrl && (\n            <UnitVideo videoId={getYoutubeId(unit.videoUrl)} opt={options} />\n          )}\n        </>\n      ) : (\n      <Loading />\n      )}\n    </>\n  );\n}\n","import React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Layout, Menu, Typography } from 'antd';\nimport { useHistory, useParams, Switch, Route } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Loading from '../../components/Loading';\nimport {\n  getDetailCourse,\n  selectDetailCourse,\n} from '../../redux/reducers/courseReducer';\nimport { PlayCircleOutlined } from '@ant-design/icons';\nimport UnitPage from './UnitPage.js';\n\nconst { Content, Sider } = Layout;\nconst { Title } = Typography;\nconst FixedLayout = styled(Layout)`\n  height: 100%;\n`;\nconst ScrollSider = styled(Sider)`\n  overflow: auto;\n  min-width: 200px !important;\n  background-color: ${(prop) => prop.theme.colors.white};\n  height: 100%;\n`;\nconst StyledImg = styled.img`\n  width: 100%;\n`;\nconst CourseTitle = styled.div`\n  margin: 16px;\n  font-weight: bold;\n  font-size: 24px;\n  text-align: center;\n  line-height: 2rem;\n`;\nconst ContentWrapper = styled(Content)`\n  padding: 24px;\n  justify-content: center;\n  align-items: center;\n  overflow: auto;\n`;\n\nexport default function ClassroomPage() {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const detailCourse = useSelector(selectDetailCourse);\n  const { id } = useParams();\n\n  useEffect(() => {\n    dispatch(getDetailCourse(id));\n  }, [dispatch, id]);\n\n  const handleClickUnit = (e) => {\n    return history.push(`/classroom/${id}/unit/${e.key}`);\n  };\n\n  return (\n    <>\n      {detailCourse ? (\n        <FixedLayout>\n          <ScrollSider>\n            <Menu\n              mode=\"inline\"\n              defaultSelectedKeys={['1']}\n              defaultOpenKeys={['sub1']}\n            >\n              <StyledImg alt=\"課程圖片\" src={detailCourse.imgUrl} />\n              <CourseTitle>{detailCourse.title}</CourseTitle>\n              {detailCourse.unit_list.map((unit) => (\n                <Menu.Item\n                  key={unit.id}\n                  icon={<PlayCircleOutlined style={{ fontSize: 20 }} />}\n                  onClick={handleClickUnit}\n                >\n                  {unit.title}\n                </Menu.Item>\n              ))}\n            </Menu>\n          </ScrollSider>\n          <ContentWrapper>\n            <Switch>\n              <Route exact path={`/classroom/:id`}>\n                <center>\n                  <Title>歡迎來到課程：{detailCourse.title}</Title>\n                  <Title level={3}>請點擊左方播放清單開始上課</Title>\n                </center>\n              </Route>\n              <Route exact path={`/classroom/:id/unit/:unitId`}>\n                <UnitPage />\n              </Route>\n            </Switch>\n          </ContentWrapper>\n        </FixedLayout>\n      ) : (\n        <Loading />\n      )}\n    </>\n  );\n}\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { Form, Input, Button } from 'antd';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { Upload, message } from 'antd';\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons';\nimport { applyTeacher } from '../../redux/reducers/teacherReducer';\nimport { getMe } from '../../redux/reducers/userReducer';\nimport ImgCrop from 'antd-img-crop';\n\nconst RegisterPageWrapper = styled.div`\n  padding: 10px;\n`;\nconst RegisterBox = styled.div`\n  padding: 10px;\n  margin: 10px auto;\n  align-items: center;\n  border: 1px solid ${(props) => props.theme.colors.primary.main};\n  border-radius: 8px;\n  max-width: 750px;\n  text-align: center;\n`;\nconst FormTitle = styled.div`\n  font-size: 32px;\n  padding-bottom: 18px;\n`;\nconst FormItem = styled(Form.Item)`\n  .ant-form-item {\n    text-align: left;\n    &-extra {\n      text-align: left;\n      padding-left: 3px;\n    }\n    &-explain-error {\n      text-align: left;\n      padding-left: 3px;\n    }\n  }\n`;\nconst StyledForm = styled(Form)`\n  margin: 10px auto;\n`;\n\nconst layout = {\n  labelCol: {\n    span: 6,\n  },\n  wrapperCol: {\n    span: 12,\n  },\n};\nconst tailLayout = {\n  wrapperCol: {\n    span: 24,\n  },\n};\nconst validateMessages = {\n  required: '此為必填項目',\n  types: {\n    email: '請輸入正確信箱格式',\n  },\n};\n\nfunction beforeUpload(file) {\n  const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\n  if (!isJpgOrPng) {\n    message.error('You can only upload JPG/PNG file!');\n  }\n  const isLt2M = file.size / 1024 / 1024 < 2;\n  if (!isLt2M) {\n    message.error('Image must smaller than 2MB!');\n  }\n  if (isJpgOrPng && isLt2M) {\n    message.loading({\n      content: '圖片上傳中...',\n      key: 'isUploading',\n      duration: 0,\n    });\n  }\n  return isJpgOrPng && isLt2M;\n}\n\nexport default function TeacherApplyPage() {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [isUploading, setIsUploading] = useState(false);\n  const [imageUrl, setImageUrl] = useState(null);\n  const [form] = Form.useForm();\n\n  const handleChange = (info) => {\n    //console.log('info', info.file.status);\n    if (info.file.status === 'uploading') {\n      setIsUploading(true);\n      return;\n    }\n    if (info.file.status === 'done') {\n      //console.log('done');\n      message.success({\n        content: '圖片上傳完成',\n        key: 'isUploading',\n        duration: 2,\n      });\n      // Get this url from response in real world.\n      const returnUrl = info.file.response.data.link;\n      setImageUrl(returnUrl);\n      //console.log('returnUrl', returnUrl)\n      form.setFieldsValue({\n        upload: returnUrl,\n      });\n      return\n    }\n    if (info.file.status === 'error') {\n      //console.log('error');\n      message.error({\n        content: '圖片上傳失敗',\n        key: 'isUploading',\n      });\n    }\n  };\n\n  const handleOnFinish = (value) => {\n    console.log(value);\n    if (!value.upload) {\n      return message.error('圖片上傳失敗，請稍後再試');\n    }\n    dispatch(\n      applyTeacher({\n        name: value.name,\n        description: value.description,\n        avatarUrl: value.upload,\n      })\n    ).then((res) => {\n      if (res.ok === 1) {\n        message.success('申請老師成功');\n        dispatch(getMe());\n        return history.push('/');\n      }\n      return message.error(res.errorMessage);\n    });\n  };\n\n  return (\n    <RegisterPageWrapper>\n      <RegisterBox>\n        <FormTitle>申請開課</FormTitle>\n        <StyledForm\n          {...layout}\n          form={form}\n          onFinish={handleOnFinish}\n          validateMessages={validateMessages}\n        >\n          <FormItem\n            label=\"老師姓名\"\n            name=\"name\"\n            rules={[\n              {\n                required: true,\n              },\n            ]}\n          >\n            <Input placeholder=\"請輸入老師姓名\" />\n          </FormItem>\n          <Form.Item\n            label=\"老師介紹\"\n            name=\"description\"\n            rules={[\n              {\n                required: true,\n              },\n            ]}\n          >\n            <Input.TextArea\n              rows={8}\n              style={{ resize: 'none' }}\n              placeholder=\"請輸入介紹文字\"\n            />\n          </Form.Item>\n          <Form.Item\n            name=\"upload\"\n            label=\"上傳大頭照\"\n            extra=\"限制格式：JPG/PNG，大小 2 MB 以內\"\n            rules={[\n              {\n                required: true,\n              },\n            ]}\n          >\n            <ImgCrop rotate shape=\"round\">\n              <Upload\n                name=\"image\"\n                listType=\"picture-card\"\n                showUploadList={false}\n                action=\"https://api.imgur.com/3/image\"\n                headers={{\n                  'Authorization': 'Client-ID ef0e0fd605be920',\n                  'X-Requested-With': null,\n                  'Cache-Control': null,\n                }}\n                beforeUpload={beforeUpload}\n                onChange={handleChange}\n              >\n                {imageUrl ? (\n                  <img\n                    src={imageUrl}\n                    alt=\"avatar\"\n                    style={{ width: '100%', borderRadius: '50%' }}\n                  />\n                ) : (\n                  <>\n                    {isUploading ? <LoadingOutlined /> : <PlusOutlined />}\n                  </>\n                )}\n              </Upload>\n            </ImgCrop>\n          </Form.Item>\n          <br />\n          <FormItem {...tailLayout}>\n            <Button htmlType=\"submit\" size=\"large\" type=\"primary\">\n              送出申請\n            </Button>\n          </FormItem>\n        </StyledForm>\n      </RegisterBox>\n    </RegisterPageWrapper>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Space, Table } from 'antd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  getMyTeachCourseList,\n  selectMyTeachCourseList,\n  selectIsGettingCourse,\n} from '../../../redux/reducers/courseReducer';\nimport Loading from '../../../components/Loading';\nimport { toCurrency } from '../../../utils';\n// import { dummyData as data } from \"./dummyData\";\n\nexport const columns = [\n  {\n    title: 'Id',\n    dataIndex: 'id',\n    key: 'id',\n  },\n  {\n    title: '課程名稱',\n    dataIndex: 'title',\n    key: 'title',\n    render: (text, record) => (\n      <Link to={`/courses/${record.id}`}>{text}</Link>\n    ),\n  },\n  {\n    title: '目前售價',\n    dataIndex: 'price',\n    key: 'price',\n  },\n  {\n    title: '是否公開',\n    dataIndex: 'isPublic',\n    key: 'isPublic',\n  },\n  {\n    title: '更新於',\n    dataIndex: 'updatedAt',\n    key: 'updatedAt',\n  },\n  {\n    title: 'Action',\n    key: 'action',\n    render: (text, record) => (\n      <Space size=\"middle\">\n        <Link to={`/teacher/courses/${record.id}`}>編輯</Link>\n        <Link to={`/classroom/${record.id}`}>預覽上課頁</Link>\n      </Space>\n    ),\n  },\n];\n\nexport default function MyTeachCourseTable() {\n  const dispatch = useDispatch();\n  const courses = useSelector(selectMyTeachCourseList);\n  const isGettingCourseList = useSelector(selectIsGettingCourse);\n  useEffect(() => {\n    dispatch(getMyTeachCourseList());\n  }, [dispatch]);\n  console.log(courses);\n\n  return (\n    <>\n      {isGettingCourseList && <Loading />}\n      {!isGettingCourseList && (\n        <>\n          {courses ? (\n            <Table\n              columns={columns}\n              dataSource={\n                courses &&\n                courses.map((item) => ({\n                  ...item,\n                  key: item.id,\n                  price: toCurrency(item.price),\n                  isPublic: item.isPublic ? '是' : '否',\n                  updatedAt: item.updatedAt.slice(0, 10),\n                }))\n              }\n            />\n          ) : (\n            <center>\n              <strong>目前還沒開設任何課程</strong>\n            </center>\n          )}\n        </>\n      )}\n    </>\n  );\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { Breadcrumb, Button } from \"antd\";\nimport MyTeachCourseTable from \"./MyTeachCourseTable\";\n\nconst PageWrapper = styled.div`\n  padding: 24px;\n`;\nconst InfoHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n`;\n\nexport default function MyTeachCoursePage() {\n  return (\n    <PageWrapper>\n      <InfoHeader>\n        <Breadcrumb>\n          <Breadcrumb.Item>課程列表</Breadcrumb.Item>\n        </Breadcrumb>\n        <Button type=\"primary\">\n          <Link to=\"/teacher/courses/new\">新增課程</Link>\n        </Button>\n      </InfoHeader>\n        <MyTeachCourseTable />\n    </PageWrapper>\n  );\n}\n","import React, { useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { addCourse } from '../../../redux/reducers/courseReducer';\nimport styled from 'styled-components';\nimport {\n  Form,\n  Input,\n  InputNumber,\n  Layout,\n  Select,\n  Breadcrumb,\n  Button,\n  Upload,\n  message,\n} from 'antd';\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons';\nimport ImgCrop from 'antd-img-crop';\n\n\nconst { Content } = Layout;\nconst { Option } = Select;\n\nconst PageWrapper = styled.div`\n  padding: 24px;\n  text-align: center;\n`;\nconst InfoHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\nconst FormContainer = styled(Content)`\n  margin: 0px 30px;\n  padding: 24px;\n  background-color: ${(props) => props.theme.colors.white};\n`;\n\nconst layout = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 12 },\n};\nconst validateMessages = {\n  required: '${label}必填',\n  types: {\n    number: '${label}格式錯誤',\n  },\n  number: {\n    range: '${label}需介於於 ${min}~${max}',\n  },\n};\n\nfunction beforeUpload(file) {\n  const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\n  if (!isJpgOrPng) {\n    message.error('You can only upload JPG/PNG file!');\n  }\n  const isLt2M = file.size / 1024 / 1024 < 2;\n  if (!isLt2M) {\n    message.error('Image must smaller than 2MB!');\n  }\n  if (isJpgOrPng && isLt2M) {\n    message.loading({\n      content: '圖片上傳中...',\n      key: 'isUploading',\n      duration: 0,\n    });\n  }\n  return isJpgOrPng && isLt2M;\n}\n\nexport default function NewCoursePage() {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [form] = Form.useForm();\n  const [isUploading, setIsUploading] = useState(false);\n  const [imageUrl, setImageUrl] = useState(null);\n\n  const handleOnFinish = (value) => {\n    if (!value.upload) {\n      return message.error('圖片上傳失敗，請稍後再試');\n    }\n    dispatch(\n      addCourse({\n        title: value.title,\n        price: value.price,\n        description: value.description,\n        imgUrl: value.upload,\n      })\n    ).then((res) => {\n      if (res.ok === 1) {\n        message.success('新增課程成功');\n        //dispatch(getMe());\n        return history.push('/teacher/courses');\n      }\n      return message.error(res.errorMessage);\n    });\n  };\n\n  const handleChange = (info) => {\n    //console.log('info', info);\n    if (info.file.status === 'uploading') {\n      setIsUploading(true);\n      return;\n    }\n    if (info.file.status === 'done') {\n      //console.log('done');\n      message.success({\n        content: '圖片上傳完成',\n        key: 'isUploading',\n        duration: 2,\n      });\n      // Get this url from response in real world.\n      const returnUrl = info.file.response.data.link;\n      setImageUrl(returnUrl);\n      form.setFieldsValue({\n        upload: returnUrl,\n      });\n      return;\n    }\n    if (info.file.status === 'error') {\n      //console.log('error');\n      message.error({\n        content: '圖片上傳失敗',\n        key: 'isUploading',\n      });\n    }\n  };\n\n  return (\n    <PageWrapper>\n      <InfoHeader>\n        <Breadcrumb style={{ margin: '16px 0' }}>\n          <Breadcrumb.Item>\n            <Link to=\"/teacher/courses\">課程列表</Link>\n          </Breadcrumb.Item>\n          <Breadcrumb.Item>新增課程</Breadcrumb.Item>\n        </Breadcrumb>\n      </InfoHeader>\n      <FormContainer>\n        <Form\n          {...layout}\n          form={form}\n          validateMessages={validateMessages}\n          initialValues={{ isPublic: '非公開' }}\n          onFinish={handleOnFinish}\n        >\n          <Form.Item name=\"isPublic\" label=\"課程狀態\">\n            <Select disabled>\n              <Option value=\"非公開\">非公開</Option>\n            </Select>\n          </Form.Item>\n          <Form.Item name=\"title\" label=\"課程名稱\" rules={[{ required: true }]}>\n            <Input />\n          </Form.Item>\n          <Form.Item\n            name=\"price\"\n            label=\"課程金額\"\n            rules={[{ required: true, type: 'number', min: 0, max: 9999 }]}\n            extra=\"單位：新台幣, 限制 0~9999\"\n          >\n            <InputNumber\n              formatter={(value) =>\n                `$ ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n              }\n              parser={(value) => value.replace(/\\$\\s?|(,*)/g, '')}\n            />\n          </Form.Item>\n          <Form.Item\n            name=\"description\"\n            label=\"課程敘述\"\n            rules={[{ required: true }]}\n          >\n            <Input.TextArea rows={4} style={{ resize: 'none' }} />\n          </Form.Item>\n          <Form.Item\n            name=\"upload\"\n            label=\"上傳課程封面圖\"\n            extra=\"限制格式：JPG/PNG，大小 2 MB 以內\"\n            rules={[\n              {\n                required: true,\n              },\n            ]}\n          >\n            <ImgCrop rotate grid aspect={4/3} modalTitle={'上傳圖片'}>\n              <Upload\n                name=\"image\"\n                listType=\"picture-card\"\n                className=\"upload-course\"\n                showUploadList={false}\n                action=\"https://api.imgur.com/3/image\"\n                headers={{\n                  Authorization: 'Client-ID ef0e0fd605be920',\n                  'X-Requested-With': null,\n                }}\n                beforeUpload={beforeUpload}\n                onChange={handleChange}\n              >\n                {imageUrl ? (\n                  <img src={imageUrl} alt=\"avatar\" style={{ width: '100%' }} />\n                ) : (\n                  <>\n                    {isUploading ? (\n                      <LoadingOutlined style={{ fontSize: '30px', padding: '60px' }} />\n                    ) : (\n                      <PlusOutlined style={{ fontSize: '30px', padding: '60px' }} />\n                    )}\n                  </>\n                )}\n              </Upload>\n            </ImgCrop>\n          </Form.Item>\n          <center>\n            <Button type=\"primary\" size=\"large\" htmlType=\"submit\">\n              新增課程\n            </Button>\n          </center>\n        </Form>\n      </FormContainer>\n    </PageWrapper>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Form, Input, Button, Upload, message } from 'antd';\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { selectUser, getMe } from '../../../redux/reducers/userReducer';\nimport { updateTeacherInfo } from '../../../redux/reducers/teacherReducer';\nimport ImgCrop from 'antd-img-crop';\n\nconst PageWrapper = styled.div`\n  font-size: 20px;\n  text-align: center;\n  padding: 24px;\n`;\n\nconst Info = styled.div`\n  font-size: 16px;\n  text-align: center;\n`;\nconst FormContainer = styled.div`\n  margin-top: 12px;\n  padding: 24px;\n  background-color: ${(props) => props.theme.colors.white};\n`;\nconst layout = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 12 },\n};\nfunction beforeUpload(file) {\n  const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\n  if (!isJpgOrPng) {\n    message.error('You can only upload JPG/PNG file!');\n  }\n  const isLt2M = file.size / 1024 / 1024 < 2;\n  if (!isLt2M) {\n    message.error('Image must smaller than 2MB!');\n  }\n  if (isJpgOrPng && isLt2M) {\n    message.loading({\n      content: '圖片上傳中...',\n      key: 'isUploading',\n      duration: 0,\n    });\n  }\n  return isJpgOrPng && isLt2M;\n}\n\nexport default function TeacherSetting() {\n  const dispatch = useDispatch();\n  const user = useSelector(selectUser);\n  const [isUploading, setIsUploading] = useState(false);\n  const [imageUrl, setImageUrl] = useState(null);\n  const [form] = Form.useForm();\n\n  useEffect(() => {\n    form.setFieldsValue({\n      name: user.Teacher.name,\n      description: user.Teacher.description,\n      upload: user.Teacher.avatarUrl,\n    });\n    setImageUrl(user.Teacher.avatarUrl);\n  }, [form, user]);\n\n  const handleChange = (info) => {\n    console.log('info', info);\n    if (info.file.status === 'uploading') {\n      setIsUploading(true);\n      return;\n    }\n    if (info.file.status === 'done') {\n      console.log('done');\n      message.success({\n        content: '圖片上傳完成',\n        key: 'isUploading',\n        duration: 2,\n      });\n      // Get this url from response in real world.\n      const returnUrl = info.file.response.data.link;\n      setImageUrl(returnUrl);\n      form.setFieldsValue({\n        upload: returnUrl,\n      });\n    }\n    if (info.file.status === 'error') {\n      //console.log('error');\n      message.error({\n        content: '圖片上傳失敗',\n        key: 'isUploading',\n      });\n    }\n  };\n\n  const handleOnFinish = (value) => {\n    console.log(value);\n    if (!value.upload) {\n      return message.error('圖片上傳失敗，請稍後再試');\n    }\n    // 重複判定\n    if (\n      value.name === user.Teacher.name &&\n      value.description === user.Teacher.description &&\n      value.upload === user.Teacher.avatarUrl\n    ) {\n      return message.warning('資料無異動');\n    }\n    dispatch(\n      updateTeacherInfo({\n        name: value.name,\n        description: value.description,\n        avatarUrl: value.upload,\n      })\n    ).then((res) => {\n      if (res.ok === 1) {\n        message.success('資料更新成功');\n        return dispatch(getMe());\n      }\n      return message.error(res.errorMessage);\n    });\n  };\n\n  return (\n    <PageWrapper>\n      <Info>申請時間：{new Date(user.Teacher.createdAt).toLocaleString()}</Info>\n      <Info>更新時間：{new Date(user.Teacher.updatedAt).toLocaleString()}</Info>\n      <FormContainer>\n        <Form {...layout} form={form} onFinish={handleOnFinish}>\n          <Form.Item\n            name=\"name\"\n            label=\"老師名稱\"\n            rules={[\n              {\n                required: true,\n              },\n            ]}\n          >\n            <Input />\n          </Form.Item>\n          <Form.Item\n            name=\"description\"\n            label=\"老師介紹\"\n            rules={[{ required: true }]}\n          >\n            <Input.TextArea rows={3} style={{ resize: 'none' }} />\n          </Form.Item>\n          <Form.Item\n            name=\"upload\"\n            label=\"上傳大頭照\"\n            //valuePropName=\"fileList\"\n            extra=\"限制格式：JPG/PNG，大小 2 MB 以內\"\n            rules={[\n              {\n                required: true,\n              },\n            ]}\n          >\n            <ImgCrop rotate shape=\"round\">\n              <Upload\n                name=\"image\"\n                listType=\"picture-card\"\n                showUploadList={false}\n                action=\"https://api.imgur.com/3/image\"\n                headers={{\n                  Authorization: 'Client-ID ef0e0fd605be920',\n                  'X-Requested-With': null,\n                }}\n                beforeUpload={beforeUpload}\n                onChange={handleChange}\n              >\n                {imageUrl ? (\n                  <img\n                    src={imageUrl}\n                    alt=\"avatar\"\n                    style={{ width: '100%', borderRadius: '50%' }}\n                  />\n                ) : (\n                  <>{isUploading ? <LoadingOutlined /> : <PlusOutlined />}</>\n                )}\n              </Upload>\n            </ImgCrop>\n          </Form.Item>\n          <center>\n            <Button type=\"primary\" size=\"large\" htmlType=\"submit\">\n              確認更新\n            </Button>\n          </center>\n        </Form>\n      </FormContainer>\n    </PageWrapper>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport styled from \"styled-components\";\nimport { Button, List, Typography, Space, Tooltip } from \"antd\";\nimport {\n  MenuOutlined,\n  EditOutlined,\n  DeleteOutlined,\n  PlusOutlined,\n} from \"@ant-design/icons\";\n\nconst ListContainer = styled.div`\n\n`;\n\nconst ListContent = styled(List.Item)`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst ListFooter = styled(List.Item)`\n  background-color: ${(props) => props.theme.colors.secondary.light};\n`;\n\nconst UnitText = styled.span`\n  font-size: 16px;\n  line-height: 24px;\n`;\n\nfunction Unit({\n  unit,\n  dragHandleProps,\n  handleClickEditUnitButton,\n  handleDeleteUnit,\n}) {\n  return (\n    <ListContent>\n      <Space align=\"center\" size={10}>\n        <Tooltip title=\"拖拉\">\n          <MenuOutlined style={{ color: \"#999\" }} {...dragHandleProps} />\n        </Tooltip>\n        <UnitText>{unit.title}</UnitText>\n      </Space>\n      <Space>\n        <Tooltip title=\"編輯\">\n          <Button\n            icon={<EditOutlined />}\n            onClick={() => handleClickEditUnitButton(unit.id)}\n          ></Button>\n        </Tooltip>\n        <Tooltip title=\"刪除\">\n          <Button\n            icon={<DeleteOutlined />}\n            onClick={() => handleDeleteUnit(unit.id)}\n          />\n        </Tooltip>\n      </Space>\n    </ListContent>\n  );\n}\n\nexport default function CourseUnitsList({\n  unitList,\n  placeholder,\n  handleAddUnit,\n  handleDeleteUnit,\n  handleClickEditUnitButton,\n}) {\n  return (\n    <ListContainer>\n      <List size=\"large\" bordered>\n        {unitList.map((unit, index) => (\n          <Draggable key={unit.id} draggableId={`id: ${unit.id}`} index={index}>\n            {(provided) => (\n              <div ref={provided.innerRef} {...provided.draggableProps}>\n                <Unit\n                  unit={unit}\n                  dragHandleProps={provided.dragHandleProps}\n                  handleDeleteUnit={handleDeleteUnit}\n                  handleClickEditUnitButton={handleClickEditUnitButton}\n                />\n              </div>\n            )}\n          </Draggable>\n        ))}\n        {placeholder}\n        <ListFooter>\n          <Space\n            align=\"center\"\n            size={10}\n            style={{ cursor: \"pointer\" }}\n            onClick={handleAddUnit}\n          >\n            <PlusOutlined />\n            <UnitText>新增課程</UnitText>\n          </Space>\n        </ListFooter>\n      </List>\n    </ListContainer>\n  );\n}\n","import React, {\n  useEffect,\n  useState,\n  forwardRef,\n  useImperativeHandle,\n} from 'react';\nimport {\n  Form,\n  Input,\n  InputNumber,\n  Select,\n  Upload,\n  message,\n} from 'antd';\nimport ImgCrop from 'antd-img-crop';\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons';\n\nconst { Option } = Select;\nconst layout = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 12 },\n};\nconst validateMessages = {\n  required: '${label}必填',\n  types: {\n    number: '${label}格式錯誤',\n  },\n  number: {\n    range: '${label}需介於於 ${min}~${max}',\n  },\n};\n\nfunction beforeUpload(file) {\n  const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\n  if (!isJpgOrPng) {\n    message.error('You can only upload JPG/PNG file!');\n  }\n  const isLt2M = file.size / 1024 / 1024 < 2;\n  if (!isLt2M) {\n    message.error('Image must smaller than 2MB!');\n  }\n  if (isJpgOrPng && isLt2M) {\n    message.loading({\n      content: '圖片上傳中...',\n      key: 'isUploading',\n      duration: 0,\n    });\n  }\n  return isJpgOrPng && isLt2M;\n}\n\nfunction CourseSettingForm({ course }, ref) {\n  const [form] = Form.useForm();\n  const [imageUrl, setImageUrl] = useState(null);\n  const [isUploading, setIsUploading] = useState(false);\n\n  const handleChange = (info) => {\n    console.log('info', info);\n    if (info.file.status === 'uploading') {\n      setIsUploading(true);\n      return;\n    }\n    if (info.file.status === 'done') {\n      console.log('done');\n      message.success({\n        content: '圖片上傳完成',\n        key: 'isUploading',\n        duration: 2,\n      });\n      // Get this url from response in real world.\n      const returnUrl = info.file.response.data.link;\n      setImageUrl(returnUrl);\n      form.setFieldsValue({\n        upload: returnUrl,\n      });\n    }\n    if (info.file.status === 'error') {\n      //console.log('error');\n      message.error({\n        content: '圖片上傳失敗',\n        key: 'isUploading',\n      });\n    }\n  };\n\n  useImperativeHandle(ref, () => ({\n    getFieldsValue: () => {\n      return form.validateFields();\n    },\n  }));\n  useEffect(() => {\n    form.setFieldsValue({\n      isPublic: course.isPublic ? '公開' : '非公開',\n      title: course.title,\n      price: course.price,\n      description: course.description,\n      upload: course.imgUrl,\n    });\n    setImageUrl(course.imgUrl);\n  }, [form, course]);\n  return (\n    <Form form={form} {...layout} validateMessages={validateMessages}>\n      <center>建立時間：{new Date(course.createdAt).toLocaleString()}</center>\n      <center>最後更新：{new Date(course.updatedAt).toLocaleString()}</center>\n      <br />\n      <Form.Item name=\"isPublic\" label=\"課程狀態\" rules={[{ required: true }]}>\n        <Select>\n          <Option value=\"公開\">公開</Option>\n          <Option value=\"非公開\">非公開</Option>\n        </Select>\n      </Form.Item>\n      <Form.Item name=\"title\" label=\"課程名稱\" rules={[{ required: true }]}>\n        <Input />\n      </Form.Item>\n      <Form.Item\n        name=\"price\"\n        label=\"課程金額\"\n        rules={[{ required: true, type: 'number', min: 0, max: 9999 }]}\n        extra=\"單位：新台幣, 限制 0~9999\"\n      >\n        <InputNumber\n          formatter={(value) =>\n            `$ ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n          }\n          parser={(value) => value.replace(/\\$\\s?|(,*)/g, '')}\n        />\n      </Form.Item>\n      <Form.Item\n        name=\"description\"\n        label=\"課程敘述\"\n        rules={[{ required: true }]}\n      >\n        <Input.TextArea rows={4} style={{ resize: 'none' }} />\n      </Form.Item>\n      <Form.Item\n        name=\"upload\"\n        label=\"Upload\"\n        //valuePropName=\"fileList\"\n        extra=\"限制格式：JPG/PNG，大小 2 MB 以內\"\n        rules={[\n          {\n            required: true,\n          },\n        ]}\n      >\n        <ImgCrop rotate grid aspect={4/3} modalTitle={'上傳圖片'}>\n          <Upload\n            name=\"image\"\n            listType=\"picture-card\"\n            className=\"upload-course\"\n            showUploadList={false}\n            action=\"https://api.imgur.com/3/image\"\n            headers={{\n              Authorization: 'Client-ID ef0e0fd605be920',\n              'X-Requested-With': null,\n            }}\n            beforeUpload={beforeUpload}\n            onChange={handleChange}\n          >\n            {imageUrl ? (\n              <img src={imageUrl} alt=\"avatar\" style={{ width: '100%' }} />\n            ) : (\n              <div>\n                {isUploading ? <LoadingOutlined /> : <PlusOutlined />}\n                <div style={{ marginTop: 8 }}>上傳大頭照</div>\n              </div>\n            )}\n          </Upload>\n        </ImgCrop>\n      </Form.Item>\n    </Form>\n  );\n}\n\nexport default forwardRef(CourseSettingForm);\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Link, useParams, useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  selectIsGettingCourse,\n  getDetailCourse,\n  setDetailCourse,\n  updateCourse,\n  selectDetailCourse,\n} from '../../../redux/reducers/courseReducer';\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\nimport styled from 'styled-components';\nimport { Layout, Breadcrumb, Button, message } from 'antd';\nimport CourseUnitsList from '../../../components/CourseUnitsList';\nimport CourseSettingForm from '../../../components/CourseSettingForm';\nimport Loading from '../../../components/Loading';\nconst { Content } = Layout;\n\nconst PageWrapper = styled.div`\n  padding: 24px;\n  text-align: center;\n`;\nconst InfoHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst CourseContent = styled(Content)`\n  padding: 24px;\n  background-color: ${(props) => props.theme.colors.white};\n`;\nconst ButtonWrapper = styled.div`\n  margin: 18px auto;\n  text-align: center;\n`;\n\nconst reorder = (list, startIndex, endIndex) => {\n  const result = Array.from(list);\n  const [removed] = result.splice(startIndex, 1);\n  result.splice(endIndex, 0, removed);\n  return result;\n};\n\nexport default function UpdateCoursePage() {\n  const { id } = useParams();\n  const dispatch = useDispatch();\n  const isGettingCourse = useSelector(selectIsGettingCourse);\n  const history = useHistory();\n  const course = useSelector(selectDetailCourse);\n  //console.log('course detail', course);\n  const ChildRef = useRef();\n\n  useEffect(() => {\n    dispatch(getDetailCourse(id));\n    return () => {\n      dispatch(setDetailCourse(null));\n    };\n  }, [dispatch, id]);\n\n  function handleOnDragEnd(result) {\n    // 無動作或是目的地=原本位置 > 返回\n    if (!result || result.destination.index === result.source.index) return;\n    const reorderedUnitList = reorder(\n      course.unit_list,\n      result.source.index,\n      result.destination.index\n    );\n    dispatch(setDetailCourse({ ...course, unit_list: reorderedUnitList }));\n  }\n\n  const handleAddUnit = () => {\n    const oldUnitList = course.unit_list;\n    const lastUnitId =\n      oldUnitList.length > 0\n        ? Number(oldUnitList[oldUnitList.length - 1].id)\n        : 0;\n    const unitId = lastUnitId + 1;\n    const unit = { id: unitId, title: '新課程' };\n    // 更新當前資料\n    dispatch(\n      setDetailCourse({ ...course, unit_list: [...course.unit_list, unit] })\n    );\n  };\n\n  const handleDeleteUnit = (id) => {\n    const newUnitList = course.unit_list.filter((item) => item.id !== id);\n    // 更新當前資料\n    dispatch(setDetailCourse({ ...course, unit_list: newUnitList }));\n  };\n\n  const getFormValue = async () => {\n    const value = await ChildRef.current\n      .getFieldsValue()\n      .then((values) => values)\n      .catch((error) => console.log(error));\n    if (!value) return;\n    value.isPublic = value.isPublic === '公開' ? true : false;\n    value.unit_list = course.unit_list;\n    value.imgUrl = value.upload;\n    //console.log('getFormValue', value);\n    return value;\n  };\n\n  const handleClickSave = async () => {\n    const value = await getFormValue();\n    // 沒變化時就不 call API\n    if (!value) return;\n    // courseId\n    dispatch(updateCourse(id, value)).then((json) => {\n      // 把頁面導向單元編輯頁\n      if (json.ok === 1) {\n        message.success('更新課程成功', 5)\n        return history.push(`/teacher/courses/`);\n      }\n      return message.error(json.errorMessage, 5)\n    });\n  };\n\n  const handleClickEditUnitButton = async (unitId) => {\n    const value = await getFormValue();\n    if (!value) return;\n    // courseId\n    dispatch(updateCourse(id, value)).then((json) => {\n      // 把頁面導向單元編輯頁\n      if (json.ok === 1) {\n        message.success('更新課程成功', 5)\n        return history.push(`/teacher/courses/${id}/unit/${unitId}`);\n      }\n      return message.error(json.errorMessage, 5)\n    });\n  };\n\n  return (\n    <>\n      {isGettingCourse && <Loading />}\n      {!isGettingCourse && course && (\n        <PageWrapper>\n          <InfoHeader>\n            <Breadcrumb style={{ margin: '16px 0' }}>\n              <Breadcrumb.Item>\n                <Link to=\"/teacher/courses\">課程列表</Link>\n              </Breadcrumb.Item>\n              <Breadcrumb.Item>課程\b管理({course.title})</Breadcrumb.Item>\n            </Breadcrumb>\n          </InfoHeader>\n          <CourseContent>\n            {/* 課程資訊 */}\n            <CourseSettingForm ref={ChildRef} course={course} />\n            {/* dnd */}\n            <DragDropContext onDragEnd={handleOnDragEnd}>\n              <Droppable droppableId=\"courseContent\">\n                {(provided) => (\n                  <div ref={provided.innerRef} {...provided.droppableProps}>\n                    <CourseUnitsList\n                      unitList={course.unit_list}\n                      placeholder={provided.placeholder}\n                      handleAddUnit={handleAddUnit}\n                      handleDeleteUnit={handleDeleteUnit}\n                      handleClickEditUnitButton={handleClickEditUnitButton}\n                    />\n                  </div>\n                )}\n              </Droppable>\n            </DragDropContext>\n          </CourseContent>\n          <ButtonWrapper>\n            <Button type=\"primary\" size=\"large\" onClick={handleClickSave}>\n              儲存變更\n            </Button>\n          </ButtonWrapper>\n        </PageWrapper>\n      )}\n    </>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { Link, useParams, useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  selectIsGettingCourse,\n  getUnitByUnitId,\n  selectUnit,\n  updateUnitByUnitId,\n} from '../../../redux/reducers/courseReducer';\nimport styled from 'styled-components';\nimport { Layout, Breadcrumb, Button, Form, Input, message } from 'antd';\nimport Loading from '../../../components/Loading';\nconst { Content } = Layout;\n\nconst PageWrapper = styled.div`\n  padding: 24px;\n`;\nconst InfoHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst FormContainer = styled(Content)`\n  padding: 24px;\n  background-color: ${(props) => props.theme.colors.white};\n`;\n\nconst layout = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 14 },\n};\n\nconst validateMessages = {\n  required: '${label}必填',\n  types: {\n    number: '${label}格式錯誤',\n  },\n  number: {\n    min: '${label}不可小於 ${min}',\n  },\n};\n\nexport default function EditUnitPage() {\n  const { id, unitId } = useParams();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const unit = useSelector(selectUnit);\n  const isGettingCourse = useSelector(selectIsGettingCourse);\n  const [form] = Form.useForm();\n  console.log('original unit', unit);\n  console.log('isGettingCourse', isGettingCourse)\n\n  useEffect(() => {\n    console.log('useEffect');\n    dispatch(getUnitByUnitId(id, unitId));\n  }, [dispatch, id, unitId]);\n\n  if (unit) {\n    form.setFieldsValue({\n      title: unit.title,\n      description: unit.description || '',\n      videoUrl: unit.videoUrl || '',\n    });\n  }\n  \n  const onFinish = (values) => {\n    dispatch(updateUnitByUnitId(id, unitId, values)).then((json) => {\n      if (json.ok === 1) {\n        message.success('單元更新成功', 5);\n        return history.push(`/teacher/courses/${id}`); // 把頁面導向單元列表\n      }\n      return message.error(json.errorMessage, 5);\n    });\n    //\n  };\n\n  return (\n    <>\n      {isGettingCourse && <Loading />}\n      {!isGettingCourse && unit && (\n        <PageWrapper>\n          <InfoHeader>\n            <Breadcrumb style={{ margin: '16px 0' }}>\n              <Breadcrumb.Item>\n                <Link to=\"/teacher/courses\">課程列表</Link>\n              </Breadcrumb.Item>\n              <Breadcrumb.Item>\n                <Link to={`/teacher/courses/${id}`}>\n                  課程\b管理({unit.courseTitle})\n                </Link>\n              </Breadcrumb.Item>\n              <Breadcrumb.Item>編輯單元(id:{unit.id})</Breadcrumb.Item>\n            </Breadcrumb>\n          </InfoHeader>\n          <FormContainer>\n            <Form\n              {...layout}\n              form={form}\n              onFinish={onFinish}\n              validateMessages={validateMessages}\n            >\n              <Form.Item\n                name=\"title\"\n                label=\"單元名稱\"\n                rules={[{ required: true }]}\n              >\n                <Input />\n              </Form.Item>\n              <Form.Item name=\"description\" label=\"單元敘述\">\n                <Input.TextArea rows={8} style={{ resize: 'none' }} />\n              </Form.Item>\n              <Form.Item name=\"videoUrl\" label=\"影片連結\">\n                <Input placeholder=\"請輸入 Youtube 連結\" />\n              </Form.Item>\n              <center>\n                <Button type=\"primary\" size=\"large\" htmlType=\"submit\">\n                  儲存\n                </Button>\n              </center>\n            </Form>\n          </FormContainer>\n        </PageWrapper>\n      )}\n    </>\n  );\n}\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport MyTeachCoursePage from \"../pages/TeacherPage/MyTeachCoursePage\";\nimport NewCourseForm from '../pages/TeacherPage/NewCourseForm'\nimport TeacherSetting from '../pages/TeacherPage/TeacherSettingForm'\nimport UpdateCourseForm from '../pages/TeacherPage/UpdateCourseForm'\nimport EditUnitForm from '../pages/TeacherPage/EditUnitForm'\n\nexport default function MeRoutes() {\n  return (\n    <Switch>\n      <Route exact path={`/teacher`}>\n        <div></div>\n      </Route>\n      <Route path={`/teacher/info`}>\n        <TeacherSetting/>\n      </Route>\n      <Route exact path={`/teacher/courses`}>\n        <MyTeachCoursePage />\n      </Route>\n      <Route exact path={`/teacher/courses/new`}>\n        <NewCourseForm />\n      </Route>\n      <Route exact path=\"/teacher/courses/:id\">\n        <UpdateCourseForm />\n      </Route>\n      <Route exact path=\"/teacher/courses/:id/unit/:unitId\">\n        <EditUnitForm />\n      </Route>\n    </Switch>\n  );\n}\n","import React, { useEffect } from 'react';\nimport TeacherRoutes from '../../routes/TeacherRoutes';\nimport styled from 'styled-components';\nimport { Link, useLocation, useHistory } from 'react-router-dom';\nimport { Layout, Menu } from 'antd';\nimport { UserOutlined, ReadOutlined } from '@ant-design/icons';\nimport { selectUser } from '../../redux/reducers/userReducer';\nimport { useSelector, useDispatch } from 'react-redux';\n\nconst { Sider } = Layout;\nconst FixedSider = styled(Sider)`\n  overflow: auto;\n  height: 100vh;\n  position: fixed;\n  left: 0;\n`;\nconst StyledMenu = styled(Menu)`\n  height: 100%;\n`;\nconst StyledMenuItem = styled(Menu.Item)`\n  font-size: 20px;\n`;\nconst AvatarWrapper = styled.div`\n  padding: 20px 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\nconst StyledImg = styled.img`\n  height: 130px;\n  border-radius: 50%;\n`\n\nexport default function TeacherPage() {\n  const location = useLocation();\n  const history = useHistory();\n  const user = useSelector(selectUser);\n\n  useEffect(() => {\n    if (location.pathname === '/teacher') {\n      history.push('/teacher/info');\n    }\n  }, [history, location.pathname]);\n\n  return (\n    <Layout>\n      <FixedSider>\n        <StyledMenu\n          mode=\"inline\"\n          defaultSelectedKeys={['1']}\n          defaultOpenKeys={['sub1']}\n        >\n          <AvatarWrapper>\n            <StyledImg alt='avatar' src={user.Teacher.avatarUrl} />\n          </AvatarWrapper>\n          <StyledMenuItem\n            key=\"1\"\n            icon={<UserOutlined style={{ fontSize: 20 }} />}\n          >\n            <Link to=\"/teacher/info\">老師資料</Link>\n          </StyledMenuItem>\n          <StyledMenuItem\n            key=\"2\"\n            icon={<ReadOutlined style={{ fontSize: 20 }} />}\n          >\n            <Link to=\"/teacher/courses\">課程管理</Link>\n          </StyledMenuItem>\n        </StyledMenu>\n      </FixedSider>\n      <Layout style={{ marginLeft: '200px' }}>\n        <TeacherRoutes />\n      </Layout>\n    </Layout>\n  );\n}\n","import React from 'react';\nimport { Switch, Route, Link, useParams } from 'react-router-dom';\n//  引入各分頁\nimport HomePage from '../pages/HomePage';\nimport LoginPage from '../pages/LoginPage';\nimport RegisterPage from '../pages/RegisterPage';\nimport MePage from '../pages/MePage';\nimport ConsolePage from '../pages/ConsolePage';\nimport CartListPage from '../pages/CartListPage';\nimport CheckoutPage from '../pages/CheckoutPage';\nimport CourseListPage from '../pages/CourseListPage';\nimport MyCoursePage from '../pages/MyCoursePage';\nimport CourseInfoPage from '../pages/CourseInfoPage';\nimport TeacherInfoPage from '../pages/TeacherInfoPage';\nimport ClassroomPage from '../pages/ClassroomPage';\n\nimport TeacherApplyPage from '../pages/TeacherApplyPage';\n\nimport TeacherPage from '../pages/TeacherPage';\n\nimport { useSelector } from 'react-redux';\nimport { selectUser } from '../redux/reducers/userReducer';\n\nconst padding = 36;\n\nconst NoLoggingMessage = () => (\n  <center>\n    <br />\n    <h1>請先註冊或登入</h1>\n    <h1>\n      <Link to=\"/register\">註冊</Link>\n      <br />\n      <Link to=\"/login\">登入</Link>\n    </h1>\n  </center>\n);\n\nconst UnauthorizedMessage = () => (\n  <center>\n    <br />\n    <h1>您未授權訪問此頁面</h1>\n  </center>\n);\n\nfunction Routes() {\n  const user = useSelector(selectUser);\n  console.log('route user', user);\n  return (\n    <Switch>\n      {/* ------------- 任何身分 ------------- */}\n      {/* 首頁 */}\n      <Route exact path=\"/\">\n        <HomePage />\n      </Route>\n      {/* 註冊 */}\n      <Route exact path=\"/register\">\n        <RegisterPage />\n      </Route>\n      {/* 登入 */}\n      <Route exact path=\"/login\">\n        <LoginPage />\n      </Route>\n      {/* 課程列表 */}\n      <Route exact path=\"/courses\">\n        <CourseListPage padding={padding} />\n      </Route>\n      {/* 單一課程介紹 */}\n      <Route exact path=\"/courses/:id\">\n        <CourseInfoPage />\n      </Route>\n      {/* 老師介紹 */}\n      <Route exact path=\"/teacher-info/:id\">\n        <TeacherInfoPage padding={padding} />\n      </Route>\n\n      {/* ------------- 一般會員 ------------- */}\n      {/* 購物車 */}\n      <Route exact path=\"/cart\">\n        {user ? <CartListPage padding={padding} /> : <NoLoggingMessage />}\n      </Route>\n      {/* 結帳 */}\n      <Route exact path=\"/checkout/:id?\">\n        {user ? <CheckoutPage padding={padding} /> : <NoLoggingMessage />}\n      </Route>\n      {/* 我的課程 */}\n      <Route exact path=\"/my-course\">\n        {user ? <MyCoursePage padding={padding} /> : <NoLoggingMessage />}\n      </Route>\n      {/* 上課頁面  底下還有子路由時不可設 exact */}\n      <Route path=\"/classroom/:id/\">\n        {user ? <ClassroomPage /> : <NoLoggingMessage />}\n      </Route>\n      {/* 我的帳號 底下還有子路由時不可設 exact */}\n      <Route path=\"/me\">{user ? <MePage /> : <NoLoggingMessage />}</Route>\n\n      {/* 註冊老師 */}\n      <Route path=\"/teacher-apply\">\n        {user ? (\n          user.authTypeId === 1 ? (\n            <TeacherApplyPage />\n          ) : (\n            <UnauthorizedMessage />\n          )\n        ) : (\n          <NoLoggingMessage />\n        )}\n      </Route>\n\n      {/* ------------- 老師 ------------- */}\n      <Route path=\"/teacher\">\n        {user && user.authTypeId === 2 ? <TeacherPage /> : <NoLoggingMessage />}\n      </Route>\n\n      {/* ------------- 管理員 ------------- */}\n      {/* 管理後台 */}\n      <Route path=\"/console\">\n        {user &&\n          (user && user.authTypeId === 3 ? (\n            <ConsolePage />\n          ) : (\n            <UnauthorizedMessage />\n          ))}\n      </Route>\n\n      {/* 其餘網址一律導至首頁 */}\n      <Route path=\"/\">\n        <CourseListPage padding={padding} />\n      </Route>\n    </Switch>\n  );\n}\n\nexport default Routes;\n","import React, { useEffect } from \"react\";\nimport \"./App.css\";\nimport { useLocation } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { Layout } from \"antd\";\nimport Header from \"./components/Header\";\nimport Footer from \"./components/Footer\";\nimport Routes from \"./routes/Routes\";\nimport { useDispatch } from \"react-redux\";\nimport { getMe } from \"./redux/reducers/userReducer\";\n\nconst { Content } = Layout;\nconst AntLayout = styled(Layout)`\n  min-height: 100vh;\n  height: ${(props) => props.$fixedsider && `100vh`};\n`;\n\nconst consolePage = [\"console\", \"me\", \"classroom\", \"teacher/\"];\nconst fixedSiderPage = [\"classroom\"];\n\nfunction App() {\n  //console.log(\"render app\");\n  const dispatch = useDispatch();\n  const { pathname } = useLocation();\n  //console.log(pathname);\n  const checkIsConsolePage = consolePage.some((el) => pathname.includes(el));\n  const checkIsFixedSiderPage = fixedSiderPage.some((el) =>\n    pathname.includes(el)\n  );\n\n  useEffect(() => {\n    dispatch(getMe());\n  }, [dispatch]);\n\n  return (\n    <AntLayout $fixedsider={checkIsFixedSiderPage}>\n      {/* optional header */}\n      <Header />\n      <Content>\n        {/* Routes */}\n        <Routes />\n      </Content>\n      {/* optional footer */}\n      {!checkIsConsolePage && <Footer />}\n    </AntLayout>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","/* eslint-disable no-param-reassign */\n/* eslint-disable import/no-unresolved */\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport { getUnitListAPI, updateUnitListAPI } from \"../../webAPI/courseAPI\";\n\nexport const unitSlice = createSlice({\n  name: \"unit\",\n  initialState: {\n    unit: null,\n    unitList: null,\n    course: null,\n    isLoading: false,\n    errorMessage: \"\",\n  },\n  reducers: {\n    setCourse: (state, action) => {\n      state.course = action.payload;\n    },\n    setUnit: (state, action) => {\n      state.unit = action.payload;\n    },\n    setUnitList: (state, action) => {\n      state.unitList = action.payload;\n    },\n    setErrorMessage: (state, action) => {\n      state.errorMessage = action.payload;\n    },\n    setIsLoading: (state, action) => {\n      state.isLoading = action.payload;\n    },\n  },\n});\n\n// action\nexport const {\n  setCourse,\n  setUnit,\n  setUnitList,\n  setErrorMessage,\n  setIsLoading,\n} = unitSlice.actions;\n\n// redux thunk function\nexport const getUnitListByCourseId = (courseId) => (dispatch) => {\n  dispatch(setIsLoading(true));\n  dispatch(setCourse(null));\n  dispatch(setUnit(null));\n  dispatch(setUnitList(null));\n  dispatch(setErrorMessage(\"\"));\n  console.log(\"reducer\");\n  getUnitListAPI(courseId)\n    .then((course) => {\n      if (course.ok === 0) {\n        dispatch(setErrorMessage(\"cannot find course\"));\n        dispatch(setIsLoading(false));\n        return;\n      }\n      // success\n      dispatch(setUnit(course.data.unit_list[0]));\n      dispatch(setUnitList(course.data.unit_list));\n      dispatch(setCourse(course.data));\n      dispatch(setIsLoading(false));\n    })\n    .catch((err) => {\n      dispatch(setIsLoading(false));\n      console.log(\"err: \", err);\n    });\n};\nexport const getUnitByUnitId = (course, unitId) => (dispatch) => {\n  dispatch(setIsLoading(true));\n  dispatch(setUnit(course.unit_list[unitId]));\n  dispatch(setIsLoading(false));\n};\nexport const updateLocalUnitList = (unitList) => (dispatch) => {\n  dispatch(setUnitList(unitList));\n};\nexport const updateUnitList = (courseId, unitList) => (dispatch) => {\n  if (!courseId || !unitList) return console.log(\"no required info\");\n  updateUnitListAPI(courseId, unitList)\n    .then((json) => {\n      if (json.ok === 0) {\n        console.log(json);\n        return;\n      }\n      // success\n      console.log(\"更新單元列表成功\");\n    })\n    .catch((err) => {\n      console.log(\"err: \", err);\n    });\n};\n\n// selector\nexport const selectUnit = (store) => store.unit.unit;\nexport const selectUnitList = (store) => store.unit.unitList;\nexport const selectCourse = (store) => store.unit.course;\nexport const selectErrorMessage = (store) => store.unit.errorMessage;\nexport const selectIsLoading = (store) => store.unit.isLoading;\n\nexport default unitSlice.reducer;\n","/* eslint-disable import/no-unresolved */\n/* eslint-disable no-param-reassign */\nimport { createSlice } from '@reduxjs/toolkit';\n\nexport const errorMessageSlice = createSlice({\n  name: 'error',\n  initialState: {\n    errorMessage: null,\n  },\n  reducers: {\n    setErrorMessage: (state, action) => {\n      //  參數為單一值非物件\n      state.errorMessage = action.payload;\n    },\n  },\n});\n\n// 設定 action\nexport const { setErrorMessage } = errorMessageSlice.actions;\n\n// selector\nexport const selectErrorMessage = store => store.error.errorMessage;\n\nexport default errorMessageSlice.reducer;\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport cartReducer from \"./reducers/cartReducer\";\r\nimport courseReducer from \"./reducers/courseReducer\";\r\nimport teacherReducer from \"./reducers/teacherReducer\";\r\nimport userReducer from \"./reducers/userReducer\";\r\nimport memberReducer from \"./reducers/memberReducer\";\r\nimport unitReducer from \"./reducers/unitReducer\";\r\nimport orderReducer from \"./reducers/orderReducer\";\r\nimport errorMessageReducer from \"./reducers/errorMessageReducer\"\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    cart: cartReducer,\r\n    order: orderReducer,\r\n    course: courseReducer,\r\n    teacher: teacherReducer,\r\n    user: userReducer,\r\n    member: memberReducer,\r\n    unit: unitReducer,\r\n    errorMessage: errorMessageReducer,\r\n  },\r\n});\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { ThemeProvider } from \"styled-components\";\nimport { theme } from \"./constants/theme\";\nimport store from \"./redux/store\";\nimport { Provider } from \"react-redux\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <ThemeProvider theme={theme}>\n        <Router>\n          <App />\n        </Router>\n      </ThemeProvider>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export const theme = {\n  colors: {\n    primary: {\n      main: \"#3483cd\",\n      light: \"#70b2ff\",\n      dark: \"#00579c\",\n      text: \"#000000\",\n    },\n    secondary: {\n      main: \"#f89f3c\",\n      light: \"#ffd06c85\",\n      dark: \"#c07000\",\n      text: \"#000000\",\n    },\n    white: \"#fff\",\n    grey: \"#d3d3d3c4\",\n  },\n};\n"],"sourceRoot":""}